{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Table from'react-bootstrap/Table';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BindingVarTable(){var endpoint_uri='http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';var query_txt='select * where {?s ?p ?o} limit 10';var _useState=useState({}),_useState2=_slicedToArray(_useState,2),jsonResponse=_useState2[0],setJsonResponse=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),varNames=_useState4[0],setVarNames=_useState4[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,d){var response,jsonData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(url,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+d});case 3:response=_context.sent;_context.next=6;return response.json();case 6:jsonData=_context.sent;setJsonResponse(jsonData);console.log('jsonResponse:',jsonResponse);if(jsonData){if(jsonData.head){if(jsonData.head.vars){setVarNames(jsonData.head.vars);}}}console.log('varNames:',varNames);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log('Error:',_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function fetchData(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData(endpoint_uri,query_txt);},[]);return/*#__PURE__*/_jsx(\"div\",{children:varNames?/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:varNames.map(function(v){return v;})})})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:varNames.map(function(varName){/*#__PURE__*/_jsx(\"td\",{children:jsonResponse.results.bindings.map(function(tuple){tuple[varName].value;})});})})})]}):/*#__PURE__*/_jsx(\"p\",{children:\" Data not yet available ... \"})});}export default BindingVarTable;","map":{"version":3,"names":["useState","useEffect","Table","jsx","_jsx","jsxs","_jsxs","BindingVarTable","endpoint_uri","query_txt","_useState","_useState2","_slicedToArray","jsonResponse","setJsonResponse","_useState3","_useState4","varNames","setVarNames","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","d","response","jsonData","wrap","_callee$","_context","prev","next","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","sent","json","console","log","head","vars","t0","stop","_x","_x2","apply","arguments","children","striped","bordered","hover","size","map","v","varName","results","bindings","tuple","value"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/BindingVarTable.js"],"sourcesContent":["import {useState,useEffect} from 'react'\nimport Table from 'react-bootstrap/Table';\n\nfunction BindingVarTable(){\n\n    const endpoint_uri = 'http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';\n    const query_txt = 'select * where {?s ?p ?o} limit 10';\n    \n\n    const [jsonResponse,setJsonResponse] = useState({});\n    const [varNames,setVarNames] = useState([]);\n\n    const fetchData = async (url, d ) => {\n        try {   \n            \n            const response = await fetch(url,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                     \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+d\n            }\n            )            \n            \n            \n            const jsonData = await response.json();\n            setJsonResponse(jsonData);\n\n            \n            console.log('jsonResponse:', jsonResponse);\n\n            if(jsonData){\n                if(jsonData.head){\n                    if(jsonData.head.vars){\n                        setVarNames(jsonData.head.vars);\n                    }\n                }\n            }\n\n            console.log('varNames:', varNames);\n\n        } catch (error) {\n            console.log('Error:', error);\n        }\n    };\n\n    useEffect (\n        () =>{\n            fetchData(endpoint_uri, query_txt);\n        },\n        []\n    );\n\n    return(\n        <div>\n            {varNames ?(\n                <Table striped bordered hover size='sm'>\n                    <thead>\n                        <tr>\n                            <th>{varNames.map(v => v )}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {/* <tr>\n                        <td>{jsonResponse.results.bindings.map(tuple =>  {\n                            varNames.map(v => tuple[v].value)\n                        })}</td>\n                    </tr> */}\n                    <tr>\n                        {varNames.map(varName =>{\n                            <td>{jsonResponse.results.bindings.map(tuple =>  {\n                                 tuple[varName].value\n                            })}</td>\n                        })}\n                    </tr>\n                    </tbody>\n\n                </Table>\n            ):(\n                <p> Data not yet available ... </p>\n            )}\n        </div>\n    );\n}\nexport default BindingVarTable;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}