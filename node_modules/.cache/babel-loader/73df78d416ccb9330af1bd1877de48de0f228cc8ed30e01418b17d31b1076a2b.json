{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as d3 from'd3';import{useEffect,useState,useRef}from\"react\";import{RADIUS,drawNetwork}from'./drawNetwork';import React from'react';import ForceUndirectedD3Graph from'./ForceUndirectedD3Graph';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function DatasetDiscoveryExplainedSVGGraph_v2(_ref){var kbUri=_ref.kbUri,termInfo=_ref.termInfo,width=_ref.width,height=_ref.height;var prefix2uri={'skos:':'http://www.w3.org/2004/02/skos/core#','sosa:':'http://www.w3.org/ns/sosa/','ucmm:':'http://purl.org/ucmm#','rdf:':'http://www.w3.org/1999/02/22-rdf-syntax-ns#','dcat:':'http://www.w3.org/ns/dcat#','dcterms:':'http://purl.org/dc/terms/','cpm:':'http://purl.org/voc/cpm#','geo:':'http://www.opengis.net/ont/geosparql#','ssn-ext:':'http://www.w3.org/ns/ssn/ext/','time:':'http://www.w3.org/2006/time#','xsd:':'http://www.w3.org/2001/XMLSchema#','i1:':'http://example.org/b2a5ed57-5c4e-4596-b803-d2ac7f5b9991#','i2:':'http://example.org/51824c86-ae0f-442f-9df2-e86244984ba3#','i3:':'http://example.org/97b4842b-94b3-4205-8781-476813d8177b#','i4:':'http://example.org/e747d804-a5d1-4fd1-bd9b-306a8ebd4904#','i5:':'http://example.org/de5b570a-b560-4e84-a755-52c2aa499874#','i6:':'http://example.org/3df904de-e47d-4bf9-85a0-7c0942aff8b6#','i7:':'http://example.org/BDML_TCHR#','i8:':'http://example.org/4f676524-a831-41fe-9afb-d95f4e7597e3#','i9:':'http://example.org/f4968943-ad6f-4563-a737-58fe3285fb3c#','i10:':'http://example.org/17e24931-ccd6-4de0-a01c-9ffb3be88461#'};function getPrefixFromUri(resourceUri){// console.log(`getPrefixFromUri(resourceUri: ', ${resourceUri})`);\nvar prefix='';Object.entries(prefix2uri).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),prefixKey=_ref3[0],uri=_ref3[1];if(resourceUri.includes(uri)){// console.log(` resourceUri.includes(${uri})`);\nprefix=prefixKey;return;// exit map function\n}});// console.log(` prefix: ', ${prefix}`);\nreturn prefix;}function getPrefixedUri(resourceUri){// console.log(`getPrefixedUri(resourceUri: ', ${resourceUri})`);\nvar prefix=getPrefixFromUri(resourceUri);if(prefix==='')return resourceUri;var prefixUri=prefix2uri[prefix];var prefixedUri=resourceUri.replace(prefixUri,prefix);console.log(\" prefixedUri: ', \".concat(prefixedUri));return prefixedUri;}var prefix2group={// THEAI ODATIS FORMATER AERIS\n'i1:':1,'i2:':1,'i3:':1,'i4:':2,'i5:':2,'i6:':2,'i7:':3,'i8:':3,'i9:':3,'i10:':3,'skos:':5,'sosa:':6,'ucmm:':7,'rdf:':8,'dcat:':9,'dcterms:':10};function getGroupFromPrefixedUri(prefixedUri){// console.log('prefixedUri',prefixedUri);\nvar end=String(prefixedUri).indexOf(\":\");// console.log('end',end);\nvar prefix=prefixedUri.substring(0,end+1);if(prefix2group[prefix]){return prefix2group[prefix];}else{return 4;}}var _useState=useState({nodes:[// {\n//     id: String,\n//     group:Int32Array,\n// }\n],links:[// {\n//     source: String,\n//     target: String,\n//     value: Int16Array\n// }\n]}),_useState2=_slicedToArray(_useState,2),d3Graph=_useState2[0],setD3Graph=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentlyExplainedTerm=_useState4[0],setCurrentlyExplainedTerm=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),currentlyVisualisedTerm=_useState6[0],setCurrentlyVisualisedTerm=_useState6[1];function containId(nodes,searchId){var _iterator=_createForOfIteratorHelper(nodes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;if(node.id===searchId){return true;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}function explainDatasetsFromDescAndTitle(_x){return _explainDatasetsFromDescAndTitle.apply(this,arguments);}function _explainDatasetsFromDescAndTitle(){_explainDatasetsFromDescAndTitle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(tmpD3Graph){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(resolve,reject){var queryTxt,response,jsonData,subjects,properties,objects;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!termInfo.term){resolve(false);}console.log('explainDatasetsFromDescAndTitle()');console.log(' kbUri : ',kbUri);console.log(' termInfo.term : ',termInfo.term);console.log(' tmpD3Graph: ',tmpD3Graph);queryTxt=\"\\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\n            PREFIX sosa: <http://www.w3.org/ns/sosa/>\\n            PREFIX ucmm: <http://purl.org/ucmm#> \\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \\n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \\n            PREFIX dcterms: <http://purl.org/dc/terms/> \\n            SELECT DISTINCT ?dataset ?datasetProp ?litMentioningSearchLabel\\n            WHERE{\\n                VALUES ?datasetProp {dcterms:description dcterms:title}\\n                ?dataset rdf:type dcat:Dataset . \\n                ?dataset ?datasetProp ?litMentioningSearchLabel. \\n                FILTER ( \\n                    regex(?litMentioningSearchLabel,\\\"\".concat(termInfo.term,\"\\\",\\\"i\\\") \\n                )\\n                FILTER (\\n                    lang(?litMentioningSearchLabel)=\\\"en\\\"\\n                )\\n            }\\n            \").replace('\\n',' ');_context.next=9;return fetch(kbUri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt});case 9:response=_context.sent;_context.next=12;return response.json();case 12:jsonData=_context.sent;console.log(' jsonData:',jsonData);subjects=[];properties=[];objects=[];if(jsonData){if(jsonData.results){if(jsonData.results.bindings){if(jsonData.results.bindings.length>0){jsonData.results.bindings.map(function(binding){var datasetNodeId=getPrefixedUri(binding['dataset']['value']);// console.log('datasetNodeId',datasetNodeId)\nif(!containId(tmpD3Graph.nodes,datasetNodeId)){tmpD3Graph.nodes.push({id:datasetNodeId,group:getGroupFromPrefixedUri(datasetNodeId),nodeInfo:binding['dataset']['value'],nodeLabel:datasetNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:binding['dataset']['value']});}var datasetProp=getPrefixedUri(binding['datasetProp']['value']);// console.log('datasetProp',datasetProp)\nvar datasetPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('datasetPropId',datasetPropId)\ntmpD3Graph.nodes.push({id:datasetPropId,group:getGroupFromPrefixedUri(datasetProp),nodeInfo:binding['datasetProp']['value'],nodeLabel:datasetProp,nodeType:'property'// literal, resource, property, \n});var litMentioningSearchLabel=binding['litMentioningSearchLabel']['value'];var litId=datasetNodeId.substring(0,datasetNodeId.indexOf(\":\")+1)+\"lit_\"+tmpD3Graph.nodes.length;var litLabel=datasetNodeId+\".\"+datasetProp.substring(datasetProp.indexOf(\":\")+1);console.log('litId',litId);tmpD3Graph.nodes.push({id:litId,group:getGroupFromPrefixedUri(litId),nodeInfo:litMentioningSearchLabel,nodeLabel:litLabel,nodeType:'literal'// literal, resource, property, \n});var litRelId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);tmpD3Graph.nodes.push({id:litRelId,group:4,nodeInfo:'search term relation: within',nodeLabel:\"within\",nodeType:'property'// literal, resource, property, \n});// search label to lit\ntmpD3Graph.links.push({source:tmpD3Graph.nodes[0].id,target:litRelId,value:1});tmpD3Graph.links.push({source:litRelId,target:litId,value:1});// Dataset to lit\ntmpD3Graph.links.push({source:datasetNodeId,target:datasetPropId,value:1});tmpD3Graph.links.push({source:datasetPropId,target:litId,value:1});tmpD3Graph.links.push({source:datasetPropId,target:litId,value:1});});}}}}console.log('tmpD3Graph:',tmpD3Graph);resolve(true);_context.next=26;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](0);console.log('Error:',_context.t0);resolve(false);case 26:case\"end\":return _context.stop();}},_callee,null,[[0,22]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}()));case 1:case\"end\":return _context2.stop();}},_callee2);}));return _explainDatasetsFromDescAndTitle.apply(this,arguments);}function explainDatasetsFromObsCol(_x2){return _explainDatasetsFromObsCol.apply(this,arguments);}function _explainDatasetsFromObsCol(){_explainDatasetsFromObsCol=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(tmpD3Graph){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(resolve,reject){var queryTxt,response,jsonData,subjects,properties,objects;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!termInfo.term){resolve(false);}console.log('explainDatasetsFromObsCol()');console.log(' kbUri : ',kbUri);console.log(' termInfo.term : ',termInfo.term);console.log(' tmpD3Graph: ',tmpD3Graph);queryTxt=\"\\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#> \\n            PREFIX sosa: <http://www.w3.org/ns/sosa/> \\n            PREFIX ucmm: <http://purl.org/ucmm#> \\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \\n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \\n            PREFIX dcterms: <http://purl.org/dc/terms/> \\n            SELECT DISTINCT ?dataset ?obsCollDatasetProp ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel\\n            WHERE{\\n                VALUES ?obsCollDatasetProp {ucmm:hasAggregatedResult}\\n                ?dataset rdf:type dcat:Dataset .\\n                ?obsColl ?obsCollDatasetProp ?dataset .\\n                ?obsColl rdf:type sosa:ObservationCollection .\\n                ?obsColl  ?obsCollProp ?skosConcept. \\n                ?skosConcept skos:prefLabel ?litMentioningSearchLabel .\\n                ?skosConcept rdf:type skos:Concept .\\n            FILTER ( \\n                regex(?litMentioningSearchLabel,\\\"\".concat(termInfo.term,\"\\\",\\\"i\\\") \\n            )\\n            FILTER (\\n                lang(?litMentioningSearchLabel)=\\\"en\\\"\\n            )\\n            }\\n            \").replace('\\n',' ');_context3.next=9;return fetch(kbUri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt});case 9:response=_context3.sent;_context3.next=12;return response.json();case 12:jsonData=_context3.sent;console.log(' jsonData:',jsonData);subjects=[];properties=[];objects=[];if(jsonData){if(jsonData.results){if(jsonData.results.bindings){if(jsonData.results.bindings.length>0){jsonData.results.bindings.map(function(binding){// ?dataset ?obsCollDatasetProp ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel\nvar datasetNodeId=getPrefixedUri(binding['dataset']['value']);// console.log('datasetNodeId',datasetNodeId)\nif(!containId(tmpD3Graph.nodes,datasetNodeId)){tmpD3Graph.nodes.push({id:datasetNodeId,group:getGroupFromPrefixedUri(datasetNodeId),nodeInfo:binding['dataset']['value'],nodeLabel:datasetNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:binding['dataset']['value']});}var obsCollDatasetProp=getPrefixedUri(binding['obsCollDatasetProp']['value']);// console.log('datasetProp',datasetProp)\nvar obsCollDatasetPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('datasetPropId',datasetPropId)\ntmpD3Graph.nodes.push({id:obsCollDatasetPropId,group:getGroupFromPrefixedUri(obsCollDatasetProp),nodeInfo:binding['obsCollDatasetProp']['value'],nodeLabel:obsCollDatasetProp,nodeType:'property'// literal, resource, property, \n});var obsCollNodeId=getPrefixedUri(binding['obsColl']['value']);// console.log('obsCollNodeId',obsCollNodeId)\nif(!containId(tmpD3Graph.nodes,obsCollNodeId)){tmpD3Graph.nodes.push({id:obsCollNodeId,group:getGroupFromPrefixedUri(obsCollNodeId),nodeInfo:binding['dataset']['value'],nodeLabel:obsCollNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:binding['dataset']['value']});}var obsCollProp=getPrefixedUri(binding['obsCollProp']['value']);// console.log('obsCollProp',obsCollProp)\nvar obsCollPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('obsCollPropId',obsCollPropID)\ntmpD3Graph.nodes.push({id:obsCollPropId,group:getGroupFromPrefixedUri(obsCollProp),nodeInfo:binding['obsCollDatasetProp']['value'],nodeLabel:obsCollProp,nodeType:'property'// literal, resource, property, \n});var conceptLabel=binding['litMentioningSearchLabel']['value'];var conceptId=getPrefixedUri(binding['skosConcept']['value']);console.log('conceptId',conceptId);tmpD3Graph.nodes.push({id:conceptId,group:getGroupFromPrefixedUri(conceptId),nodeInfo:\"\".concat(binding['skosConcept']['value'],\" :\\n  \").concat(conceptLabel),nodeLabel:conceptId,nodeType:'resource'// literal, resource, property, \n});var searchTermRelationId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);tmpD3Graph.nodes.push({id:searchTermRelationId,group:4,nodeInfo:'search term relation: within',nodeLabel:\"within\",nodeType:'property'// literal, resource, property, \n});// search label to conceptId\ntmpD3Graph.links.push({source:tmpD3Graph.nodes[0].id,target:searchTermRelationId,value:1});tmpD3Graph.links.push({source:searchTermRelationId,target:conceptId,value:1});// Dataset to ObsColl to conceptId\ntmpD3Graph.links.push({source:obsCollDatasetPropId,target:datasetNodeId,value:1});tmpD3Graph.links.push({source:obsCollDatasetPropId,target:obsCollNodeId,value:1});tmpD3Graph.links.push({source:obsCollNodeId,target:obsCollPropId,value:1});tmpD3Graph.links.push({source:obsCollPropId,target:conceptId,value:1});});}}}}console.log('tmpD3Graph:',tmpD3Graph);resolve(true);_context3.next=26;break;case 22:_context3.prev=22;_context3.t0=_context3[\"catch\"](0);console.log('Error:',_context3.t0);resolve(false);case 26:case\"end\":return _context3.stop();}},_callee3,null,[[0,22]]);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}()));case 1:case\"end\":return _context4.stop();}},_callee4);}));return _explainDatasetsFromObsCol.apply(this,arguments);}function retrieveObsColParentPath2Dataset(_x3){return _retrieveObsColParentPath2Dataset.apply(this,arguments);}function _retrieveObsColParentPath2Dataset(){_retrieveObsColParentPath2Dataset=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(obsColUri){var queryTxt,response,jsonData,parentPath,parentPathDataset;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:console.log('retrieveObsColParentPath2Dataset: ',obsColUri);queryTxt=\"\\n        PREFIX sosa: <http://www.w3.org/ns/sosa/> \\n        PREFIX ucmm: <http://purl.org/ucmm#> \\n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \\n        SELECT DISTINCT ?obsCollParent ?dataset\\n        WHERE{\\n              <\".concat(obsColUri,\">  (^sosa:hasMember)+ ?obsCollParent.\\n              ?obsCollParent rdf:type sosa:ObservationCollection .\\n          OPTIONAL{\\n            \\n            ?obsCollParent ucmm:hasAggregatedResult ?dataset .\\n          }\\n        }\\n        \").replace('\\n',' ');_context5.next=4;return fetch(kbUri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt});case 4:response=_context5.sent;_context5.next=7;return response.json();case 7:jsonData=_context5.sent;console.log(' jsonData:',jsonData);parentPath=[];parentPathDataset=[];if(jsonData.results){if(jsonData.results.bindings){if(jsonData.results.bindings.length>0){jsonData.results.bindings.map(function(binding){parentPath.push(binding['obsCollParent']['value']);if(binding['dataset']){parentPathDataset.push(binding['dataset']['value']);}else{parentPathDataset.push(undefined);}});}}}console.log(' parentPath: ',parentPath);console.log(' parentPathDataset: ',parentPathDataset);return _context5.abrupt(\"return\",[parentPath,parentPathDataset]);case 15:case\"end\":return _context5.stop();}},_callee5);}));return _retrieveObsColParentPath2Dataset.apply(this,arguments);}function explainDatasetsFromObsColParams(_x4){return _explainDatasetsFromObsColParams.apply(this,arguments);}function _explainDatasetsFromObsColParams(){_explainDatasetsFromObsColParams=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(tmpD3Graph){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(resolve,reject){var queryTxt,response,jsonData,subjects,properties,objects,index,binding,obsColl,obsCollNodeId,obsCollProp,obsCollPropId,conceptLabel,conceptId,searchTermRelationId,dataset,datasetNodeId,obsCollDatasetProp,obsCollDatasetPropId,a,obsCollParentPath,obsCollParentPathDSet,currrentObsCol,currrentObsColNodeId,i,obsCollParent,obsCollParentNodeId,hasMemberNodeId,obsCollParentDSet,obsCollParentDSetNodeId,hasAggregatedResultNodeId;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.prev=0;if(!termInfo.term){resolve(false);}console.log('explainDatasetsFromObsColParams');console.log(' kbUri : ',kbUri);console.log(' termInfo.term : ',termInfo.term);console.log(' tmpD3Graph: ',tmpD3Graph);queryTxt=\"\\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#> \\n            PREFIX sosa: <http://www.w3.org/ns/sosa/> \\n            PREFIX ucmm: <http://purl.org/ucmm#> \\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \\n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \\n            PREFIX dcterms: <http://purl.org/dc/terms/> \\n            SELECT DISTINCT ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel ?dataset\\n            WHERE{\\n                ?obsColl rdf:type sosa:ObservationCollection .\\n                ?obsColl  ?obsCollProp ?skosConcept. \\n                ?skosConcept skos:prefLabel ?litMentioningSearchLabel . \\n            OPTIONAL{\\n                ?obsColl ucmm:hasAggregatedResult ?dataset .\\n            }\\n            FILTER ( \\n                regex(?litMentioningSearchLabel,\\\"\".concat(termInfo.term,\"\\\",\\\"i\\\") \\n            )\\n            FILTER (\\n                lang(?litMentioningSearchLabel)=\\\"en\\\"\\n            )\\n            }\\n            \").replace('\\n',' ');_context6.next=9;return fetch(kbUri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt});case 9:response=_context6.sent;_context6.next=12;return response.json();case 12:jsonData=_context6.sent;console.log(' jsonData:',jsonData);subjects=[];properties=[];objects=[];if(!jsonData){_context6.next=63;break;}if(!jsonData.results){_context6.next=63;break;}if(!jsonData.results.bindings){_context6.next=63;break;}if(!(jsonData.results.bindings.length>0)){_context6.next=63;break;}index=0;case 22:if(!(index<jsonData.results.bindings.length)){_context6.next=63;break;}binding=jsonData.results.bindings[index];// ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel ?dataset\nobsColl=binding['obsColl']['value'];obsCollNodeId=getPrefixedUri(obsColl);// console.log('obsCollNodeId',obsCollNodeId)\nif(!containId(tmpD3Graph.nodes,obsCollNodeId)){tmpD3Graph.nodes.push({id:obsCollNodeId,group:getGroupFromPrefixedUri(obsCollNodeId),nodeInfo:obsColl,nodeLabel:obsCollNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:obsColl});}// console.log('obsCollProp',obsCollProp)\nobsCollProp=binding['obsCollProp']['value'];obsCollPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('obsCollPropId',obsCollPropID)\ntmpD3Graph.nodes.push({id:obsCollPropId,group:getGroupFromPrefixedUri(obsCollProp),nodeInfo:obsCollProp,nodeLabel:getPrefixedUri(obsCollProp),nodeType:'property'// literal, resource, property, \n});conceptLabel=binding['litMentioningSearchLabel']['value'];conceptId=getPrefixedUri(binding['skosConcept']['value']);console.log('conceptId',conceptId);tmpD3Graph.nodes.push({id:conceptId,group:getGroupFromPrefixedUri(conceptId),nodeInfo:\"\".concat(binding['skosConcept']['value'],\" :\\n  \").concat(conceptLabel),nodeLabel:conceptId,nodeType:'resource'// literal, resource, property, \n});searchTermRelationId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);tmpD3Graph.nodes.push({id:searchTermRelationId,group:4,nodeInfo:'in',nodeLabel:\":in\",nodeType:'property'// literal, resource, property, \n});// search label to conceptId\ntmpD3Graph.links.push({source:tmpD3Graph.nodes[0].id,target:searchTermRelationId,value:1});tmpD3Graph.links.push({source:searchTermRelationId,target:conceptId,value:1});// ObsColl to conceptId\ntmpD3Graph.links.push({source:obsCollNodeId,target:obsCollPropId,value:1});tmpD3Graph.links.push({source:obsCollPropId,target:conceptId,value:1});if(!(binding['dataset']!==undefined)){_context6.next=52;break;}dataset=binding['dataset']['value'];console.log('dataset: ',dataset);datasetNodeId=getPrefixedUri(dataset);// console.log('datasetNodeId',datasetNodeId)\nif(!containId(tmpD3Graph.nodes,datasetNodeId)){tmpD3Graph.nodes.push({id:datasetNodeId,group:getGroupFromPrefixedUri(datasetNodeId),nodeInfo:dataset,nodeLabel:datasetNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:dataset});}obsCollDatasetProp=getPrefixedUri(\"http://purl.org/ucmm#hasAggregatedResult\");// console.log('datasetProp',datasetProp)\nobsCollDatasetPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('datasetPropId',datasetPropId)\ntmpD3Graph.nodes.push({id:obsCollDatasetPropId,group:getGroupFromPrefixedUri(obsCollDatasetProp),nodeInfo:binding['obsCollDatasetProp']['value'],nodeLabel:obsCollDatasetProp,nodeType:'property'// literal, resource, property, \n});// ObsColl to Dataset\ntmpD3Graph.links.push({source:obsCollNodeId,target:obsCollDatasetPropId,value:1});tmpD3Graph.links.push({source:obsCollDatasetPropId,target:datasetNodeId,value:1});_context6.next=60;break;case 52:_context6.next=54;return retrieveObsColParentPath2Dataset(obsColl);case 54:a=_context6.sent;obsCollParentPath=a[0];obsCollParentPathDSet=a[1];currrentObsCol=obsColl;currrentObsColNodeId=getPrefixedUri(currrentObsCol);for(i=0;i<obsCollParentPath.length;i++){obsCollParent=obsCollParentPath[i];obsCollParentNodeId=getPrefixedUri(obsCollParent);if(!containId(tmpD3Graph.nodes,obsCollParentNodeId)){tmpD3Graph.nodes.push({id:obsCollParentNodeId,group:getGroupFromPrefixedUri(obsCollParentNodeId),nodeInfo:obsCollParent,nodeLabel:obsCollParentNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:obsCollParent});}hasMemberNodeId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);tmpD3Graph.nodes.push({id:hasMemberNodeId,group:getGroupFromPrefixedUri(\"sosa:hasMember\"),nodeInfo:\"http://www.w3.org/ns/sosa/hasMember\",nodeLabel:\"sosa:hasMember\",nodeType:'property'// literal, resource, property,\n});// obsCollParent to currentObsColl\ntmpD3Graph.links.push({source:obsCollParentNodeId,target:hasMemberNodeId,value:1});tmpD3Graph.links.push({source:hasMemberNodeId,target:currrentObsColNodeId,value:1});if(obsCollParentPathDSet[i]!==undefined){console.log(\"obsCollParentPathDSet[\".concat(i,\"]: \"),obsCollParentPathDSet[i]);obsCollParentDSet=obsCollParentPathDSet[i];obsCollParentDSetNodeId=getPrefixedUri(obsCollParentDSet);if(!containId(tmpD3Graph.nodes,obsCollParentDSetNodeId)){tmpD3Graph.nodes.push({id:obsCollParentDSetNodeId,group:getGroupFromPrefixedUri(obsCollParentDSetNodeId),nodeInfo:obsCollParentDSet,nodeLabel:obsCollParentDSetNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:obsCollParentDSet});}hasAggregatedResultNodeId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);tmpD3Graph.nodes.push({id:hasAggregatedResultNodeId,group:getGroupFromPrefixedUri(\"ucmm:hasAggregatedResult\"),nodeInfo:\"http://purl.org/ucmm#hasAggregatedResult\",nodeLabel:\"ucmm:hasAggregatedResult\",nodeType:'property'// literal, resource, property, \n});// obsCollParent to obsCollParentDataset\ntmpD3Graph.links.push({source:obsCollParentNodeId,target:hasAggregatedResultNodeId,value:1});tmpD3Graph.links.push({source:hasAggregatedResultNodeId,target:obsCollParentDSetNodeId,value:1});}currrentObsCol=obsCollParent;currrentObsColNodeId=obsCollParentNodeId;}case 60:index++;_context6.next=22;break;case 63:console.log('tmpD3Graph:',tmpD3Graph);resolve(true);_context6.next=71;break;case 67:_context6.prev=67;_context6.t0=_context6[\"catch\"](0);console.error('Error:',_context6.t0);resolve(false);case 71:case\"end\":return _context6.stop();}},_callee6,null,[[0,67]]);}));return function(_x11,_x12){return _ref6.apply(this,arguments);};}()));case 1:case\"end\":return _context7.stop();}},_callee7);}));return _explainDatasetsFromObsColParams.apply(this,arguments);}function explainDatasetsFromObsColPlus(_x5){return _explainDatasetsFromObsColPlus.apply(this,arguments);}function _explainDatasetsFromObsColPlus(){_explainDatasetsFromObsColPlus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(tmpD3Graph){return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return _context9.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(resolve,reject){var queryTxt,response,jsonData,subjects,properties,objects;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.prev=0;if(!termInfo.term){resolve(false);}console.log('explainDatasetsFromObsColPlus()');console.log(' kbUri : ',kbUri);console.log(' termInfo.term : ',termInfo.term);console.log(' tmpD3Graph: ',tmpD3Graph);// # obsCollDescandantProp (sosa:hasFeatureofInterest|sosa:hasUltimateFeatureofInterest|sosa:observedProperty)\nqueryTxt=\"\\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#> \\n            PREFIX sosa: <http://www.w3.org/ns/sosa/> \\n            PREFIX ucmm: <http://purl.org/ucmm#> \\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \\n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \\n            PREFIX dcterms: <http://purl.org/dc/terms/> \\n            SELECT DISTINCT ?dataset ?obsCollDatasetProp ?obsColl ?obsCollParent ?obsCollDescendant ?obsCollDescandantProp ?skosConcept ?litMentioningSearchLabel\\n            WHERE{\\n                VALUES ?obsCollDatasetProp {ucmm:hasAggregatedResult}\\n                ?dataset rdf:type dcat:Dataset .\\n                ?obsColl ?obsCollDatasetProp ?dataset .\\n                ?obsColl sosa:hasMember+ ?obsCollDescendant .\\n                ?obsCollParent sosa:hasMember ?obsCollDescendant .\\n                ?obsCollDescendant ?obsCollDescandantProp ?skosConcept. \\n                ?skosConcept skos:prefLabel ?litMentioningSearchLabel . \\n            FILTER (\\n                regex(?litMentioningSearchLabel,\\\"\".concat(termInfo.term,\"\\\",\\\"i\\\") \\n            )\\n            FILTER (\\n                lang(?litMentioningSearchLabel)=\\\"en\\\"\\n            )\\n            }\\n            \").replace('\\n',' ');_context8.next=9;return fetch(kbUri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt});case 9:response=_context8.sent;_context8.next=12;return response.json();case 12:jsonData=_context8.sent;console.log(' jsonData:',jsonData);subjects=[];properties=[];objects=[];if(jsonData){if(jsonData.results){if(jsonData.results.bindings){if(jsonData.results.bindings.length>0){jsonData.results.bindings.map(function(binding){// ?dataset ?obsCollDatasetProp ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel\n// ?dataset ?obsCollDatasetProp ?obsColl ?obsCollParent ?obsCollDescendant ?obsCollDescandantProp ?skosConcept ?litMentioningSearchLabel\nvar datasetNodeId=getPrefixedUri(binding['dataset']['value']);// console.log('datasetNodeId',datasetNodeId)\nif(!containId(tmpD3Graph.nodes,datasetNodeId)){tmpD3Graph.nodes.push({id:datasetNodeId,group:getGroupFromPrefixedUri(datasetNodeId),nodeInfo:binding['dataset']['value'],nodeLabel:datasetNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:binding['dataset']['value']});}var obsCollDatasetProp=getPrefixedUri(binding['obsCollDatasetProp']['value']);// console.log('datasetProp',datasetProp)\nvar obsCollDatasetPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('datasetPropId',datasetPropId)\ntmpD3Graph.nodes.push({id:obsCollDatasetPropId,group:getGroupFromPrefixedUri(obsCollDatasetProp),nodeInfo:binding['obsCollDatasetProp']['value'],nodeLabel:obsCollDatasetProp,nodeType:'property'// literal, resource, property, \n});var obsCollNodeId=getPrefixedUri(binding['obsColl']['value']);// console.log('obsCollNodeId',obsCollNodeId)\nif(!containId(tmpD3Graph.nodes,obsCollNodeId)){tmpD3Graph.nodes.push({id:obsCollNodeId,group:getGroupFromPrefixedUri(obsCollNodeId),nodeInfo:binding['dataset']['value'],nodeLabel:obsCollNodeId,nodeType:'resource',// literal, resource, property, \nnodeUri:binding['dataset']['value']});}var obsCollProp=getPrefixedUri(binding['obsCollProp']['value']);// console.log('obsCollProp',obsCollProp)\nvar obsCollPropId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);// console.log('obsCollPropId',obsCollPropID)\ntmpD3Graph.nodes.push({id:obsCollPropId,group:getGroupFromPrefixedUri(obsCollProp),nodeInfo:binding['obsCollDatasetProp']['value'],nodeLabel:obsCollProp,nodeType:'property'// literal, resource, property, \n});var conceptLabel=binding['litMentioningSearchLabel']['value'];var conceptId=getPrefixedUri(binding['skosConcept']['value']);console.log('conceptId',conceptId);tmpD3Graph.nodes.push({id:conceptId,group:getGroupFromPrefixedUri(conceptId),nodeInfo:\"\".concat(binding['skosConcept']['value'],\" :\\n  \").concat(conceptLabel),nodeLabel:conceptId,nodeType:'resource'// literal, resource, property, \n});var searchTermRelationId=\"nodeIdx_\".concat(tmpD3Graph.nodes.length);tmpD3Graph.nodes.push({id:searchTermRelationId,group:4,nodeInfo:'search term relation: within',nodeLabel:\"within\",nodeType:'property'// literal, resource, property, \n});// search label to conceptId\ntmpD3Graph.links.push({source:tmpD3Graph.nodes[0].id,target:searchTermRelationId,value:1});tmpD3Graph.links.push({source:searchTermRelationId,target:conceptId,value:1});// Dataset to ObsColl to conceptId\ntmpD3Graph.links.push({source:obsCollDatasetPropId,target:datasetNodeId,value:1});tmpD3Graph.links.push({source:obsCollDatasetPropId,target:obsCollNodeId,value:1});tmpD3Graph.links.push({source:obsCollNodeId,target:obsCollPropId,value:1});tmpD3Graph.links.push({source:obsCollPropId,target:conceptId,value:1});});}}}}console.log('tmpD3Graph:',tmpD3Graph);resolve(true);_context8.next=26;break;case 22:_context8.prev=22;_context8.t0=_context8[\"catch\"](0);console.log('Error:',_context8.t0);resolve(false);case 26:case\"end\":return _context8.stop();}},_callee8,null,[[0,22]]);}));return function(_x13,_x14){return _ref7.apply(this,arguments);};}()));case 1:case\"end\":return _context9.stop();}},_callee9);}));return _explainDatasetsFromObsColPlus.apply(this,arguments);}function explainDatasets(_x6){return _explainDatasets.apply(this,arguments);}function _explainDatasets(){_explainDatasets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(tmpD3Graph){var updatedExplanation;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:updatedExplanation=true;// updatedExplanation &&=await explainDatasetsFromDescAndTitle(tmpD3Graph);\n// updatedExplanation &&= await explainDatasetsFromObsCol(tmpD3Graph);\n_context10.t0=updatedExplanation;if(!_context10.t0){_context10.next=6;break;}_context10.next=5;return explainDatasetsFromObsColParams(tmpD3Graph);case 5:updatedExplanation=_context10.sent;case 6:setD3Graph(tmpD3Graph);setCurrentlyExplainedTerm(termInfo.term);return _context10.abrupt(\"return\",updatedExplanation);case 9:case\"end\":return _context10.stop();}},_callee10);}));return _explainDatasets.apply(this,arguments);}useEffect(function(){console.log(\"useEffect DatasetDiscoveryExplainedSVGGraph\");console.log(\" termInfo.term\",termInfo.term);console.log(\" currentExlainedTerm\",currentlyExplainedTerm);console.log(\" currentlyVisualisedTerm\",currentlyVisualisedTerm);console.log(\" d3Graph\",d3Graph);if(termInfo.term===''){return;}if(d3Graph.nodes.length===0||termInfo.term!=currentlyExplainedTerm){var tmpD3Graph={nodes:[{id:'nodeIdx_0',group:4,nodeInfo:'Search term: '+termInfo.term,nodeLabel:termInfo.term,nodeType:'literal'// literal, resource, property, \n}],links:[// {\n//     source: String,\n//     target: String,\n//     value: Int16Array  // default 1\n//     linkType : String  // in, out\n// }\n]};// TODO Remove\n// let updatedExplanation = false;\n// explainDatasetsFromDescAndTitle(tmpD3Graph).then( (explanationReceived) =>{\n//     updatedExplanation ||=  explanationReceived;\n//     if(updatedExplanation){\n//         setD3Graph(tmpD3Graph);\n//         setCurrentlyExplainedTerm(termInfo.term);\n//     }\n//     console.log(` updatedExplanation: ${updatedExplanation}`)\n// })\nexplainDatasets(tmpD3Graph);// NOTE that since explainDatasetsFromDescAndTitle is asynchonous the main process may return before reaching the end of explainDatasetsFromDescAndTitle\nif(currentlyVisualisedTerm!==''){if(d3.selectAll('g')){d3.selectAll('g').remove();console.log(\"  d3.selectAll('g').remove()\");}}return;}if(d3Graph.nodes.length>0&&(currentlyVisualisedTerm===''||currentlyExplainedTerm!==currentlyVisualisedTerm)){// Set the position attributes of links and nodes each time the simulation ticks.\nvar ticked=function ticked(){link.attr(\"x1\",function(d){return d.source.x;})// DatasetDiscoveryExplainedSVGGraph.js:364 Uncaught TypeError: Cannot read properties of undefined (reading 'attr')\n.attr(\"y1\",function(d){return d.source.y;}).attr(\"x2\",function(d){return d.target.x;}).attr(\"y2\",function(d){return d.target.y;});node// .attr(\"cx\", d => d.x)\n// .attr(\"cy\", d => d.y);\n.attr(\"transform\",function(d){return\"translate(\"+d.x+\",\"+d.y+\")\";});};// Reheat the simulation when drag starts, and fix the subject position.\nvar dragstarted=function dragstarted(event){if(!event.active)simulation.alphaTarget(0.3).restart();event.subject.fx=event.subject.x;event.subject.fy=event.subject.y;};// Update the subject (dragged node) position during drag.\nvar dragged=function dragged(event){event.subject.fx=event.x;event.subject.fy=event.y;};// Restore the target alpha so the simulation cools after dragging ends.\n// Unfix the subject position now that it’s no longer being dragged.\nvar dragended=function dragended(event){if(!event.active)simulation.alphaTarget(0);event.subject.fx=null;event.subject.fy=null;};// When this cell is re-run, stop the previous simulation. (This doesn’t\n// really matter since the target alpha is zero and the simulation will\n// stop naturally, but it’s a good practice.)\n//  simulation.stop();\nconsole.log(\" draw d3Graph \",d3Graph);// Specify the color scale. or schemePaired for 12 colors\nvar color=d3.scaleOrdinal(d3.schemeCategory10);// The force simulation mutates links and nodes, so create a copy\n// so that re-evaluating this cell produces the same result.\nvar links=d3Graph.links.map(function(d){return Object.create(d);});var nodes=d3Graph.nodes.map(function(d){return Object.create(d);});// Create a simulation with several forces.\nvar simulation=d3.forceSimulation(nodes).force(\"link\",d3.forceLink(links).id(function(d){return d.id;})).force(\"charge\",d3.forceManyBody()).force(\"center\",d3.forceCenter(width/2,height/2))// .force(\"collide\", d3.forceCollide().radius(30).strength(1) ) // distance between node\n.on(\"tick\",ticked);// Create the SVG container.\nvar svg=d3.select(\"svg\").attr(\"width\",width).attr(\"height\",height).attr(\"viewBox\",[0,0,width,height]).attr(\"style\",\"max-width: 100%; height: auto;\");// Add a line for each link, and a circle for each node.\nvar link=svg.append(\"g\").attr(\"stroke\",\"#999\").attr(\"stroke-opacity\",0.6).selectAll(\"line\").data(links).join(\"line\").attr(\"stroke-width\",function(d){return Math.sqrt(d.value);});var node=svg.append(\"g\").attr(\"stroke\",\"#fff\").attr(\"stroke-width\",1.5).selectAll(\".node\").data(nodes).join(\"g\").attr('class','node');node.append(\"circle\").attr(\"r\",function(d){return d.nodeType.includes('property')?3:10;}).attr(\"fill\",function(d){return color(d.group);});// Add a drag behavior.\nnode.call(d3.drag().on(\"start\",dragstarted).on(\"drag\",dragged).on(\"end\",dragended));node.append(\"title\").text(function(d){return d.nodeInfo;}).style('font-family','sans-serif').style('font-size','10px').attr('x',11).attr('y',3);node.append(\"text\").text(function(d){return d.nodeLabel;})// .style('fill', '#000')\n.style('stroke','Blue')// #000\n.style('stroke-width',0.1).style('font-family','sans-serif').style('font-size','13px').attr(\"text-anchor\",\"start\").attr('x',11).attr('y',3);simulation.nodes(nodes).on(\"tick\",ticked);simulation.force(\"link\").links(links);setCurrentlyVisualisedTerm(currentlyExplainedTerm);}},[termInfo,d3Graph]// nodes, links\n);return/*#__PURE__*/_jsx(\"div\",{children:d3Graph.nodes.length>0?/*#__PURE__*/_jsx(\"svg\",{id:\"svg\"// ref={svgRef}\n,style:{width:width,height:height},width:width,height:height}):/*#__PURE__*/_jsx(_Fragment,{})});}","map":{"version":3,"names":["d3","useEffect","useState","useRef","RADIUS","drawNetwork","React","ForceUndirectedD3Graph","jsx","_jsx","Fragment","_Fragment","DatasetDiscoveryExplainedSVGGraph_v2","_ref","kbUri","termInfo","width","height","prefix2uri","getPrefixFromUri","resourceUri","prefix","Object","entries","map","_ref2","_ref3","_slicedToArray","prefixKey","uri","includes","getPrefixedUri","prefixUri","prefixedUri","replace","console","log","concat","prefix2group","getGroupFromPrefixedUri","end","String","indexOf","substring","_useState","nodes","links","_useState2","d3Graph","setD3Graph","_useState3","_useState4","currentlyExplainedTerm","setCurrentlyExplainedTerm","_useState5","_useState6","currentlyVisualisedTerm","setCurrentlyVisualisedTerm","containId","searchId","_iterator","_createForOfIteratorHelper","_step","s","n","done","node","value","id","err","e","f","explainDatasetsFromDescAndTitle","_x","_explainDatasetsFromDescAndTitle","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","tmpD3Graph","wrap","_callee2$","_context2","prev","next","abrupt","Promise","_ref4","_callee","resolve","reject","queryTxt","response","jsonData","subjects","properties","objects","_callee$","_context","term","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","sent","json","results","bindings","length","binding","datasetNodeId","push","group","nodeInfo","nodeLabel","nodeType","nodeUri","datasetProp","datasetPropId","litMentioningSearchLabel","litId","litLabel","litRelId","source","target","t0","stop","_x7","_x8","explainDatasetsFromObsCol","_x2","_explainDatasetsFromObsCol","_callee4","_callee4$","_context4","_ref5","_callee3","_callee3$","_context3","obsCollDatasetProp","obsCollDatasetPropId","obsCollNodeId","obsCollProp","obsCollPropId","conceptLabel","conceptId","searchTermRelationId","_x9","_x10","retrieveObsColParentPath2Dataset","_x3","_retrieveObsColParentPath2Dataset","_callee5","obsColUri","parentPath","parentPathDataset","_callee5$","_context5","undefined","explainDatasetsFromObsColParams","_x4","_explainDatasetsFromObsColParams","_callee7","_callee7$","_context7","_ref6","_callee6","index","obsColl","dataset","a","obsCollParentPath","obsCollParentPathDSet","currrentObsCol","currrentObsColNodeId","i","obsCollParent","obsCollParentNodeId","hasMemberNodeId","obsCollParentDSet","obsCollParentDSetNodeId","hasAggregatedResultNodeId","_callee6$","_context6","error","_x11","_x12","explainDatasetsFromObsColPlus","_x5","_explainDatasetsFromObsColPlus","_callee9","_callee9$","_context9","_ref7","_callee8","_callee8$","_context8","_x13","_x14","explainDatasets","_x6","_explainDatasets","_callee10","updatedExplanation","_callee10$","_context10","selectAll","remove","ticked","link","attr","d","x","y","dragstarted","event","active","simulation","alphaTarget","restart","subject","fx","fy","dragged","dragended","color","scaleOrdinal","schemeCategory10","create","forceSimulation","force","forceLink","forceManyBody","forceCenter","on","svg","select","append","data","join","Math","sqrt","call","drag","text","style","children"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/DatasetDiscoveryExplainedSVGGraph_v2.js"],"sourcesContent":["import * as d3 from 'd3';\nimport { useEffect, useState, useRef } from \"react\";\nimport { RADIUS, drawNetwork } from './drawNetwork';\nimport React from 'react';\nimport ForceUndirectedD3Graph from './ForceUndirectedD3Graph';\n\n\n\nexport default function DatasetDiscoveryExplainedSVGGraph_v2 ({kbUri, termInfo, width, height}){\n\n    const prefix2uri = {\n        'skos:':'http://www.w3.org/2004/02/skos/core#',\n        'sosa:': 'http://www.w3.org/ns/sosa/',\n        'ucmm:':'http://purl.org/ucmm#',\n        'rdf:': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n        'dcat:':'http://www.w3.org/ns/dcat#',\n        'dcterms:':'http://purl.org/dc/terms/',\n        'cpm:':  'http://purl.org/voc/cpm#' ,\n        'geo:': 'http://www.opengis.net/ont/geosparql#',\n        'ssn-ext:': 'http://www.w3.org/ns/ssn/ext/' ,\n        'time:':  'http://www.w3.org/2006/time#',\n        'xsd:':  'http://www.w3.org/2001/XMLSchema#',\n\n        'i1:':'http://example.org/b2a5ed57-5c4e-4596-b803-d2ac7f5b9991#',\n        'i2:':'http://example.org/51824c86-ae0f-442f-9df2-e86244984ba3#',\n        'i3:':'http://example.org/97b4842b-94b3-4205-8781-476813d8177b#',\n        'i4:':'http://example.org/e747d804-a5d1-4fd1-bd9b-306a8ebd4904#',\n        'i5:': 'http://example.org/de5b570a-b560-4e84-a755-52c2aa499874#',\n        'i6:': 'http://example.org/3df904de-e47d-4bf9-85a0-7c0942aff8b6#',\n        'i7:': 'http://example.org/BDML_TCHR#',\n        'i8:': 'http://example.org/4f676524-a831-41fe-9afb-d95f4e7597e3#',\n        'i9:': 'http://example.org/f4968943-ad6f-4563-a737-58fe3285fb3c#',\n        'i10:': 'http://example.org/17e24931-ccd6-4de0-a01c-9ffb3be88461#'\n    };\n\n    function getPrefixFromUri(resourceUri){\n\n        // console.log(`getPrefixFromUri(resourceUri: ', ${resourceUri})`);\n\n        let prefix = '';\n        Object.entries(prefix2uri).map( ([prefixKey,uri]) => {\n            if(resourceUri.includes(uri)){\n                // console.log(` resourceUri.includes(${uri})`);\n                prefix = prefixKey;\n                return; // exit map function\n            }\n        })\n\n        // console.log(` prefix: ', ${prefix}`);\n\n        return prefix;\n    }\n    \n    function getPrefixedUri(resourceUri){\n\n        // console.log(`getPrefixedUri(resourceUri: ', ${resourceUri})`);\n\n        const prefix = getPrefixFromUri(resourceUri);\n\n        if(prefix==='')\n            return resourceUri;\n\n        const prefixUri = prefix2uri[prefix];\n        const prefixedUri = resourceUri.replace(prefixUri,prefix);\n\n         console.log(` prefixedUri: ', ${prefixedUri}`);\n\n        return prefixedUri;\n    }\n\n    const prefix2group ={ // THEAI ODATIS FORMATER AERIS\n        'i1:': 1,\n        'i2:': 1,\n        'i3:': 1,\n        'i4:': 2,\n        'i5:': 2,\n        'i6:': 2,\n        'i7:': 3,\n        'i8:': 3,\n        'i9:': 3,\n        'i10:': 3,\n\n        'skos:':5,\n        'sosa:':6,\n        'ucmm:':7,\n        'rdf:': 8,\n        'dcat:':9,\n        'dcterms:':10\n    }\n\n    function getGroupFromPrefixedUri(prefixedUri){\n\n        // console.log('prefixedUri',prefixedUri);\n        \n        const  end = String(prefixedUri).indexOf(\":\");\n\n        // console.log('end',end);\n\n        const prefix= prefixedUri.substring(0,end+1)\n\n        \n        if(prefix2group[prefix]){\n            return prefix2group[prefix];\n        }else{\n            return 4;\n        }\n    }\n\n    const [d3Graph,setD3Graph]= useState({\n        nodes:[\n            // {\n            //     id: String,\n            //     group:Int32Array,\n            // }\n        ],\n        links:[\n            // {\n            //     source: String,\n            //     target: String,\n            //     value: Int16Array\n            // }\n        ]\n    });\n\n    const [currentlyExplainedTerm, setCurrentlyExplainedTerm] = useState('');\n    const [currentlyVisualisedTerm, setCurrentlyVisualisedTerm] = useState('');\n\n \n    function containId(nodes,searchId){\n        for(const node of nodes){\n            if( node.id === searchId){\n                return true;\n               }\n        }\n        return false;\n    }\n\n    \n    async function explainDatasetsFromDescAndTitle (tmpD3Graph) {\n        \n        return new Promise (async (resolve,reject) => {\n\n        try {  \n\n            if(!termInfo.term){\n                resolve(false);\n            }\n\n            console.log('explainDatasetsFromDescAndTitle()')\n            console.log(' kbUri : ',kbUri);\n            console.log(' termInfo.term : ',termInfo.term);\n            console.log(' tmpD3Graph: ',tmpD3Graph);\n\n            \n\n            const queryTxt = `\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n            PREFIX sosa: <http://www.w3.org/ns/sosa/>\n            PREFIX ucmm: <http://purl.org/ucmm#> \n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \n            PREFIX dcterms: <http://purl.org/dc/terms/> \n            SELECT DISTINCT ?dataset ?datasetProp ?litMentioningSearchLabel\n            WHERE{\n                VALUES ?datasetProp {dcterms:description dcterms:title}\n                ?dataset rdf:type dcat:Dataset . \n                ?dataset ?datasetProp ?litMentioningSearchLabel. \n                FILTER ( \n                    regex(?litMentioningSearchLabel,\"${termInfo.term}\",\"i\") \n                )\n                FILTER (\n                    lang(?litMentioningSearchLabel)=\"en\"\n                )\n            }\n            `.replace('\\n',' ')\n\n            const response = await fetch(kbUri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                    \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt\n            }\n            )            \n            \n            const jsonData = await response.json();\n            \n            console.log(' jsonData:', jsonData);\n            \n            let subjects= [];\n            let properties = [];\n            let objects = [];\n\n            \n\n            if(jsonData){\n\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        if(jsonData.results.bindings.length>0){\n\n                            jsonData.results.bindings.map( binding =>{\n\n\n                                const datasetNodeId =  getPrefixedUri(binding['dataset']['value']);\n                                // console.log('datasetNodeId',datasetNodeId)\n                                if(!containId(tmpD3Graph.nodes,datasetNodeId)){\n                                    tmpD3Graph.nodes.push({\n                                        id: datasetNodeId,\n                                        group: getGroupFromPrefixedUri(datasetNodeId),\n                                        nodeInfo:binding['dataset']['value'],\n                                        nodeLabel: datasetNodeId,\n                                        nodeType: 'resource', // literal, resource, property, \n                                        nodeUri:binding['dataset']['value']\n                                    });\n                                }\n\n\n                                const datasetProp = getPrefixedUri(binding['datasetProp']['value']);\n                                // console.log('datasetProp',datasetProp)\n                                const datasetPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                // console.log('datasetPropId',datasetPropId)\n                                tmpD3Graph.nodes.push({\n                                    id: datasetPropId,\n                                    group: getGroupFromPrefixedUri(datasetProp),\n                                    nodeInfo: binding['datasetProp']['value'],\n                                    nodeLabel: datasetProp,\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n\n                                const litMentioningSearchLabel= binding['litMentioningSearchLabel']['value'];\n                                const litId = datasetNodeId.substring(0,datasetNodeId.indexOf(\":\")+1)+\"lit_\"+(tmpD3Graph.nodes.length);\n                                const litLabel =  datasetNodeId+\".\"+datasetProp.substring(datasetProp.indexOf(\":\")+1) ;\n\n                                console.log('litId',litId)\n                                tmpD3Graph.nodes.push({\n                                    id: litId,\n                                    group: getGroupFromPrefixedUri(litId),\n                                    nodeInfo: litMentioningSearchLabel,\n                                    nodeLabel: litLabel,\n                                    nodeType: 'literal' // literal, resource, property, \n                                });\n\n                                const litRelId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                tmpD3Graph.nodes.push({\n                                    id: litRelId,\n                                    group: 4,\n                                    nodeInfo: 'search term relation: within',\n                                    nodeLabel: \"within\",\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n                                \n\n                                // search label to lit\n                                tmpD3Graph.links.push({\n                                    source: tmpD3Graph.nodes[0].id,\n                                    target: litRelId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: litRelId,\n                                    target: litId,\n                                    value: 1\n                                });\n\n                                   \n                                // Dataset to lit\n\n                                tmpD3Graph.links.push({\n                                    source: datasetNodeId,\n                                    target: datasetPropId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: datasetPropId,\n                                    target: litId,\n                                    value: 1\n                                });\n\n\n                                tmpD3Graph.links.push({\n                                    source: datasetPropId,\n                                    target: litId,\n                                    value: 1\n                                });\n\n                                \n\n                                \n\n                                \n\n                                \n                            })\n                        }\n                    }\n                }\n\n            }\n\n            console.log('tmpD3Graph:', tmpD3Graph);\n           resolve(true);\n             \n        } catch (error) {\n            console.log('Error:', error);\n            resolve(false);\n        }\n        })\n    }\n\n    async function explainDatasetsFromObsCol (tmpD3Graph) {\n        \n        return new Promise (async (resolve,reject) => {\n\n        try {  \n\n            if(!termInfo.term){\n                resolve(false);\n            }\n\n            console.log('explainDatasetsFromObsCol()')\n            console.log(' kbUri : ',kbUri);\n            console.log(' termInfo.term : ',termInfo.term);\n            console.log(' tmpD3Graph: ',tmpD3Graph);\n\n            \n            const queryTxt = `\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#> \n            PREFIX sosa: <http://www.w3.org/ns/sosa/> \n            PREFIX ucmm: <http://purl.org/ucmm#> \n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \n            PREFIX dcterms: <http://purl.org/dc/terms/> \n            SELECT DISTINCT ?dataset ?obsCollDatasetProp ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel\n            WHERE{\n                VALUES ?obsCollDatasetProp {ucmm:hasAggregatedResult}\n                ?dataset rdf:type dcat:Dataset .\n                ?obsColl ?obsCollDatasetProp ?dataset .\n                ?obsColl rdf:type sosa:ObservationCollection .\n                ?obsColl  ?obsCollProp ?skosConcept. \n                ?skosConcept skos:prefLabel ?litMentioningSearchLabel .\n                ?skosConcept rdf:type skos:Concept .\n            FILTER ( \n                regex(?litMentioningSearchLabel,\"${termInfo.term}\",\"i\") \n            )\n            FILTER (\n                lang(?litMentioningSearchLabel)=\"en\"\n            )\n            }\n            `.replace('\\n',' ')\n\n            const response = await fetch(kbUri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                    \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt\n            }\n            )            \n            \n            const jsonData = await response.json();\n            \n            console.log(' jsonData:', jsonData);\n            \n            let subjects= [];\n            let properties = [];\n            let objects = [];\n\n            \n            if(jsonData){\n\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        if(jsonData.results.bindings.length>0){\n\n                            jsonData.results.bindings.map( binding =>{\n\n                                // ?dataset ?obsCollDatasetProp ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel\n\n                                const datasetNodeId =  getPrefixedUri(binding['dataset']['value']);\n                                // console.log('datasetNodeId',datasetNodeId)\n                                if(!containId(tmpD3Graph.nodes,datasetNodeId)){\n                                    tmpD3Graph.nodes.push({\n                                        id: datasetNodeId,\n                                        group: getGroupFromPrefixedUri(datasetNodeId),\n                                        nodeInfo:binding['dataset']['value'],\n                                        nodeLabel: datasetNodeId,\n                                        nodeType: 'resource', // literal, resource, property, \n                                        nodeUri:binding['dataset']['value']\n                                    });\n                                }\n\n\n                                const obsCollDatasetProp = getPrefixedUri(binding['obsCollDatasetProp']['value']);\n                                // console.log('datasetProp',datasetProp)\n                                const obsCollDatasetPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                // console.log('datasetPropId',datasetPropId)\n                                tmpD3Graph.nodes.push({\n                                    id: obsCollDatasetPropId,\n                                    group: getGroupFromPrefixedUri(obsCollDatasetProp),\n                                    nodeInfo: binding['obsCollDatasetProp']['value'],\n                                    nodeLabel: obsCollDatasetProp,\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n\n                                const obsCollNodeId =  getPrefixedUri(binding['obsColl']['value']);\n                                // console.log('obsCollNodeId',obsCollNodeId)\n                                if(!containId(tmpD3Graph.nodes,obsCollNodeId)){\n                                    tmpD3Graph.nodes.push({\n                                        id: obsCollNodeId,\n                                        group: getGroupFromPrefixedUri(obsCollNodeId),\n                                        nodeInfo:binding['dataset']['value'],\n                                        nodeLabel: obsCollNodeId,\n                                        nodeType: 'resource', // literal, resource, property, \n                                        nodeUri:binding['dataset']['value']\n                                    });\n                                }\n\n\n                                const obsCollProp = getPrefixedUri(binding['obsCollProp']['value']);\n                                // console.log('obsCollProp',obsCollProp)\n                                const obsCollPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                // console.log('obsCollPropId',obsCollPropID)\n                                tmpD3Graph.nodes.push({\n                                    id: obsCollPropId,\n                                    group: getGroupFromPrefixedUri(obsCollProp),\n                                    nodeInfo: binding['obsCollDatasetProp']['value'],\n                                    nodeLabel: obsCollProp,\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n\n                                const conceptLabel= binding['litMentioningSearchLabel']['value'];\n                                const conceptId = getPrefixedUri(binding['skosConcept']['value']);\n                                console.log('conceptId',conceptId)\n                                tmpD3Graph.nodes.push({\n                                    id: conceptId,\n                                    group: getGroupFromPrefixedUri(conceptId),\n                                    nodeInfo: `${binding['skosConcept']['value']} :\\n  ${conceptLabel}`,\n                                    nodeLabel: conceptId,\n                                    nodeType: 'resource' // literal, resource, property, \n                                });\n  \n\n\n                                const searchTermRelationId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                tmpD3Graph.nodes.push({\n                                    id: searchTermRelationId,\n                                    group: 4,\n                                    nodeInfo: 'search term relation: within',\n                                    nodeLabel: \"within\",\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n                                \n\n                                // search label to conceptId\n\n                                tmpD3Graph.links.push({\n                                    source: tmpD3Graph.nodes[0].id,\n                                    target: searchTermRelationId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: searchTermRelationId,\n                                    target: conceptId,\n                                    value: 1\n                                });\n\n                                   \n                                // Dataset to ObsColl to conceptId\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollDatasetPropId,\n                                    target: datasetNodeId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollDatasetPropId,\n                                    target: obsCollNodeId,\n                                    value: 1\n                                });\n\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollNodeId,\n                                    target: obsCollPropId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollPropId,\n                                    target: conceptId,\n                                    value: 1\n                                });\n\n                            })\n                        }\n                    }\n                }\n\n            }\n\n            console.log('tmpD3Graph:', tmpD3Graph);\n           resolve(true);\n             \n        } catch (error) {\n            console.log('Error:', error);\n            resolve(false);\n        }\n        })\n    }\n\n    async function retrieveObsColParentPath2Dataset(obsColUri){\n\n        console.log('retrieveObsColParentPath2Dataset: ',obsColUri)\n\n        const queryTxt = `\n        PREFIX sosa: <http://www.w3.org/ns/sosa/> \n        PREFIX ucmm: <http://purl.org/ucmm#> \n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \n        SELECT DISTINCT ?obsCollParent ?dataset\n        WHERE{\n              <${obsColUri}>  (^sosa:hasMember)+ ?obsCollParent.\n              ?obsCollParent rdf:type sosa:ObservationCollection .\n          OPTIONAL{\n            \n            ?obsCollParent ucmm:hasAggregatedResult ?dataset .\n          }\n        }\n        `.replace('\\n',' ')\n\n        const response = await fetch(kbUri,{\n            method: \"POST\",\n            credentials: \"same-origin\",\n            headers:{\n                \"Content-Type\": 'application/x-www-form-urlencoded',\n                \"xhrFields\": {withCredentials: true},\n                \"Accept\" : \"application/json\",\n            },\n            redirect: \"follow\",\n            referrerPolicy: \"no-referrer\",\n            body: \"query=\"+ queryTxt\n        }\n        )            \n        \n        const jsonData = await response.json();\n        \n        console.log(' jsonData:', jsonData);\n\n        const parentPath = [];\n        const parentPathDataset = [];\n\n        if(jsonData.results){\n            if(jsonData.results.bindings){\n                if(jsonData.results.bindings.length>0){\n\n                    jsonData.results.bindings.map( binding =>{\n                        parentPath.push(binding['obsCollParent']['value'])\n                        if(binding['dataset']){\n                            parentPathDataset.push(binding['dataset']['value'])\n                        }else{\n                            parentPathDataset.push(undefined)\n                        }\n                    })\n                }\n            }\n        }\n\n        console.log(' parentPath: ',parentPath);\n        console.log(' parentPathDataset: ',parentPathDataset);\n\n        return [parentPath, parentPathDataset];\n    }\n\n    async function explainDatasetsFromObsColParams (tmpD3Graph) {\n        \n        return new Promise (async (resolve,reject) => {\n\n        try {  \n\n            if(!termInfo.term){\n                resolve(false);\n            }\n\n            console.log('explainDatasetsFromObsColParams')\n            console.log(' kbUri : ',kbUri);\n            console.log(' termInfo.term : ',termInfo.term);\n            console.log(' tmpD3Graph: ',tmpD3Graph);\n\n            \n\n            const queryTxt = `\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#> \n            PREFIX sosa: <http://www.w3.org/ns/sosa/> \n            PREFIX ucmm: <http://purl.org/ucmm#> \n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \n            PREFIX dcterms: <http://purl.org/dc/terms/> \n            SELECT DISTINCT ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel ?dataset\n            WHERE{\n                ?obsColl rdf:type sosa:ObservationCollection .\n                ?obsColl  ?obsCollProp ?skosConcept. \n                ?skosConcept skos:prefLabel ?litMentioningSearchLabel . \n            OPTIONAL{\n                ?obsColl ucmm:hasAggregatedResult ?dataset .\n            }\n            FILTER ( \n                regex(?litMentioningSearchLabel,\"${termInfo.term}\",\"i\") \n            )\n            FILTER (\n                lang(?litMentioningSearchLabel)=\"en\"\n            )\n            }\n            `.replace('\\n',' ')\n\n            const response = await fetch(kbUri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                    \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt\n            }\n            )            \n            \n            const jsonData = await response.json();\n            \n            console.log(' jsonData:', jsonData);\n            \n            let subjects= [];\n            let properties = [];\n            let objects = [];\n\n\n            if(jsonData){\n\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        if(jsonData.results.bindings.length>0){\n\n                            for (let index = 0;  index< jsonData.results.bindings.length; index++) {\n                                const binding = jsonData.results.bindings[index];\n                                \n\n                                // ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel ?dataset\n\n                                const obsColl = binding['obsColl']['value'];\n                                const obsCollNodeId =  getPrefixedUri(obsColl);\n                                // console.log('obsCollNodeId',obsCollNodeId)\n                                if(!containId(tmpD3Graph.nodes,obsCollNodeId)){\n                                    tmpD3Graph.nodes.push({\n                                        id: obsCollNodeId,\n                                        group: getGroupFromPrefixedUri(obsCollNodeId),\n                                        nodeInfo:obsColl,\n                                        nodeLabel: obsCollNodeId,\n                                        nodeType: 'resource', // literal, resource, property, \n                                        nodeUri:obsColl\n                                    });\n                                }\n\n\n                                // console.log('obsCollProp',obsCollProp)\n                                const obsCollProp = binding['obsCollProp']['value'];\n                                const obsCollPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                // console.log('obsCollPropId',obsCollPropID)\n                                tmpD3Graph.nodes.push({\n                                    id: obsCollPropId,\n                                    group: getGroupFromPrefixedUri(obsCollProp),\n                                    nodeInfo: obsCollProp,\n                                    nodeLabel: getPrefixedUri(obsCollProp),\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n\n                                const conceptLabel= binding['litMentioningSearchLabel']['value'];\n                                const conceptId = getPrefixedUri(binding['skosConcept']['value']);\n                                console.log('conceptId',conceptId)\n                                tmpD3Graph.nodes.push({\n                                    id: conceptId,\n                                    group: getGroupFromPrefixedUri(conceptId),\n                                    nodeInfo: `${binding['skosConcept']['value']} :\\n  ${conceptLabel}`,\n                                    nodeLabel: conceptId,\n                                    nodeType: 'resource' // literal, resource, property, \n                                });\n  \n\n\n                                const searchTermRelationId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                tmpD3Graph.nodes.push({\n                                    id: searchTermRelationId,\n                                    group: 4,\n                                    nodeInfo: 'in',\n                                    nodeLabel: \":in\",\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n                                \n                                // search label to conceptId\n\n                                tmpD3Graph.links.push({\n                                    source: tmpD3Graph.nodes[0].id,\n                                    target: searchTermRelationId,\n                                    value: 1\n                                });\n\n\n                                tmpD3Graph.links.push({\n                                    source: searchTermRelationId,\n                                    target: conceptId,\n                                    value: 1\n                                });\n\n                                   \n                                \n                                // ObsColl to conceptId\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollNodeId,\n                                    target: obsCollPropId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollPropId,\n                                    target: conceptId,\n                                    value: 1\n                                });\n\n \n\n                                \n\n                                if( binding['dataset']!== undefined){\n                                    \n\n                                    const dataset = binding['dataset']['value'];\n                                    console.log('dataset: ',dataset);\n                                    const datasetNodeId =  getPrefixedUri(dataset);\n                                    // console.log('datasetNodeId',datasetNodeId)\n                                    if(!containId(tmpD3Graph.nodes,datasetNodeId)){\n                                        tmpD3Graph.nodes.push({\n                                            id: datasetNodeId,\n                                            group: getGroupFromPrefixedUri(datasetNodeId),\n                                            nodeInfo:dataset,\n                                            nodeLabel: datasetNodeId,\n                                            nodeType: 'resource', // literal, resource, property, \n                                            nodeUri:dataset\n                                        });\n                                    }\n\n                                    const obsCollDatasetProp = getPrefixedUri(\"http://purl.org/ucmm#hasAggregatedResult\");\n                                    // console.log('datasetProp',datasetProp)\n                                    const obsCollDatasetPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                    // console.log('datasetPropId',datasetPropId)\n                                    tmpD3Graph.nodes.push({\n                                        id: obsCollDatasetPropId,\n                                        group: getGroupFromPrefixedUri(obsCollDatasetProp),\n                                        nodeInfo: binding['obsCollDatasetProp']['value'],\n                                        nodeLabel: obsCollDatasetProp,\n                                        nodeType: 'property' // literal, resource, property, \n                                    });\n\n                                    \n                                    // ObsColl to Dataset\n\n                                    tmpD3Graph.links.push({\n                                        source: obsCollNodeId,\n                                        target: obsCollDatasetPropId,\n                                        value: 1\n                                    });\n\n                                    tmpD3Graph.links.push({\n                                        source: obsCollDatasetPropId,\n                                        target: datasetNodeId,\n                                        value: 1\n                                    });\n\n                                    \n\n\n                                }else{\n\n                                    // ?obsCollParent ?dataset\n\n\n                                    const a =  await retrieveObsColParentPath2Dataset(obsColl);\n                                    const obsCollParentPath =a[0];\n                                    const obsCollParentPathDSet=a[1];\n\n                                    let currrentObsCol = obsColl;\n                                    let currrentObsColNodeId = getPrefixedUri(currrentObsCol);\n\n                                    for (let i = 0; i < obsCollParentPath.length; i++) {\n\n                                        const obsCollParent = obsCollParentPath[i];\n                                        const obsCollParentNodeId = getPrefixedUri(obsCollParent);\n                                        if(!containId(tmpD3Graph.nodes,obsCollParentNodeId)){\n                                            tmpD3Graph.nodes.push({\n                                                id: obsCollParentNodeId,\n                                                group: getGroupFromPrefixedUri(obsCollParentNodeId),\n                                                nodeInfo:obsCollParent,\n                                                nodeLabel: obsCollParentNodeId,\n                                                nodeType: 'resource', // literal, resource, property, \n                                                nodeUri:obsCollParent\n                                            });\n                                        }\n\n\n                                        const hasMemberNodeId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                        tmpD3Graph.nodes.push({\n                                            id: hasMemberNodeId,\n                                            group: getGroupFromPrefixedUri(\"sosa:hasMember\"),\n                                            nodeInfo: \"http://www.w3.org/ns/sosa/hasMember\",\n                                            nodeLabel: \"sosa:hasMember\",\n                                            nodeType: 'property' // literal, resource, property,\n                                        });\n\n\n                                        // obsCollParent to currentObsColl\n\n                                        tmpD3Graph.links.push({\n                                            source: obsCollParentNodeId,\n                                            target: hasMemberNodeId,\n                                            value: 1\n                                        });\n\n                                        tmpD3Graph.links.push({\n                                            source: hasMemberNodeId,\n                                            target: currrentObsColNodeId,\n                                            value: 1\n                                        });\n\n                                        \n                                        if(obsCollParentPathDSet[i]!== undefined){\n\n                                            console.log(`obsCollParentPathDSet[${i}]: `,obsCollParentPathDSet[i]);\n\n                                            const obsCollParentDSet = obsCollParentPathDSet[i];\n                                            const obsCollParentDSetNodeId =  getPrefixedUri(obsCollParentDSet);\n\n                                            if(!containId(tmpD3Graph.nodes,obsCollParentDSetNodeId)){\n                                                tmpD3Graph.nodes.push({\n                                                    id: obsCollParentDSetNodeId,\n                                                    group: getGroupFromPrefixedUri(obsCollParentDSetNodeId),\n                                                    nodeInfo: obsCollParentDSet,\n                                                    nodeLabel: obsCollParentDSetNodeId,\n                                                    nodeType: 'resource', // literal, resource, property, \n                                                    nodeUri: obsCollParentDSet\n                                                });\n                                            }\n\n                                            const hasAggregatedResultNodeId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                            tmpD3Graph.nodes.push({\n                                                id: hasAggregatedResultNodeId,\n                                                group: getGroupFromPrefixedUri(\"ucmm:hasAggregatedResult\"),\n                                                nodeInfo:  \"http://purl.org/ucmm#hasAggregatedResult\",\n                                                nodeLabel: \"ucmm:hasAggregatedResult\",\n                                                nodeType: 'property' // literal, resource, property, \n                                                    \n                                            });\n                                            \n\n                                            // obsCollParent to obsCollParentDataset\n\n                                            tmpD3Graph.links.push({\n                                                source: obsCollParentNodeId,\n                                                target: hasAggregatedResultNodeId,\n                                                value: 1\n                                            });\n                                            tmpD3Graph.links.push({\n                                                source: hasAggregatedResultNodeId,\n                                                target: obsCollParentDSetNodeId,\n                                                value: 1\n                                            });\n    \n\n                                        }\n\n                                        \n                                        currrentObsCol = obsCollParent;\n                                        currrentObsColNodeId = obsCollParentNodeId;\n\n                                    }\n\n                                }\n   \n                            }\n                        }\n                    }\n                }\n\n            }\n\n            console.log('tmpD3Graph:', tmpD3Graph);\n           resolve(true);\n             \n        } catch (error) {\n            console.error('Error:', error);\n            resolve(false);\n        }\n        })\n    }\n    async function explainDatasetsFromObsColPlus (tmpD3Graph) {\n        \n        return new Promise (async (resolve,reject) => {\n\n        try {  \n\n            if(!termInfo.term){\n                resolve(false);\n            }\n\n            console.log('explainDatasetsFromObsColPlus()')\n            console.log(' kbUri : ',kbUri);\n            console.log(' termInfo.term : ',termInfo.term);\n            console.log(' tmpD3Graph: ',tmpD3Graph);\n\n            // # obsCollDescandantProp (sosa:hasFeatureofInterest|sosa:hasUltimateFeatureofInterest|sosa:observedProperty)\n            const queryTxt = `\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#> \n            PREFIX sosa: <http://www.w3.org/ns/sosa/> \n            PREFIX ucmm: <http://purl.org/ucmm#> \n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \n            PREFIX dcat: <http://www.w3.org/ns/dcat#> \n            PREFIX dcterms: <http://purl.org/dc/terms/> \n            SELECT DISTINCT ?dataset ?obsCollDatasetProp ?obsColl ?obsCollParent ?obsCollDescendant ?obsCollDescandantProp ?skosConcept ?litMentioningSearchLabel\n            WHERE{\n                VALUES ?obsCollDatasetProp {ucmm:hasAggregatedResult}\n                ?dataset rdf:type dcat:Dataset .\n                ?obsColl ?obsCollDatasetProp ?dataset .\n                ?obsColl sosa:hasMember+ ?obsCollDescendant .\n                ?obsCollParent sosa:hasMember ?obsCollDescendant .\n                ?obsCollDescendant ?obsCollDescandantProp ?skosConcept. \n                ?skosConcept skos:prefLabel ?litMentioningSearchLabel . \n            FILTER (\n                regex(?litMentioningSearchLabel,\"${termInfo.term}\",\"i\") \n            )\n            FILTER (\n                lang(?litMentioningSearchLabel)=\"en\"\n            )\n            }\n            `.replace('\\n',' ')\n\n            const response = await fetch(kbUri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                    \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt\n            }\n            )            \n            \n            const jsonData = await response.json();\n            \n            console.log(' jsonData:', jsonData);\n            \n            let subjects= [];\n            let properties = [];\n            let objects = [];\n\n            \n            if(jsonData){\n\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        if(jsonData.results.bindings.length>0){\n\n                            jsonData.results.bindings.map( binding =>{\n\n                                // ?dataset ?obsCollDatasetProp ?obsColl ?obsCollProp ?skosConcept ?litMentioningSearchLabel\n                                // ?dataset ?obsCollDatasetProp ?obsColl ?obsCollParent ?obsCollDescendant ?obsCollDescandantProp ?skosConcept ?litMentioningSearchLabel\n\n                                const datasetNodeId =  getPrefixedUri(binding['dataset']['value']);\n                                // console.log('datasetNodeId',datasetNodeId)\n                                if(!containId(tmpD3Graph.nodes,datasetNodeId)){\n                                    tmpD3Graph.nodes.push({\n                                        id: datasetNodeId,\n                                        group: getGroupFromPrefixedUri(datasetNodeId),\n                                        nodeInfo:binding['dataset']['value'],\n                                        nodeLabel: datasetNodeId,\n                                        nodeType: 'resource', // literal, resource, property, \n                                        nodeUri:binding['dataset']['value']\n                                    });\n                                }\n\n\n                                const obsCollDatasetProp = getPrefixedUri(binding['obsCollDatasetProp']['value']);\n                                // console.log('datasetProp',datasetProp)\n                                const obsCollDatasetPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                // console.log('datasetPropId',datasetPropId)\n                                tmpD3Graph.nodes.push({\n                                    id: obsCollDatasetPropId,\n                                    group: getGroupFromPrefixedUri(obsCollDatasetProp),\n                                    nodeInfo: binding['obsCollDatasetProp']['value'],\n                                    nodeLabel: obsCollDatasetProp,\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n\n                                const obsCollNodeId =  getPrefixedUri(binding['obsColl']['value']);\n                                // console.log('obsCollNodeId',obsCollNodeId)\n                                if(!containId(tmpD3Graph.nodes,obsCollNodeId)){\n                                    tmpD3Graph.nodes.push({\n                                        id: obsCollNodeId,\n                                        group: getGroupFromPrefixedUri(obsCollNodeId),\n                                        nodeInfo:binding['dataset']['value'],\n                                        nodeLabel: obsCollNodeId,\n                                        nodeType: 'resource', // literal, resource, property, \n                                        nodeUri:binding['dataset']['value']\n                                    });\n                                }\n\n\n                                const obsCollProp = getPrefixedUri(binding['obsCollProp']['value']);\n                                // console.log('obsCollProp',obsCollProp)\n                                const obsCollPropId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                // console.log('obsCollPropId',obsCollPropID)\n                                tmpD3Graph.nodes.push({\n                                    id: obsCollPropId,\n                                    group: getGroupFromPrefixedUri(obsCollProp),\n                                    nodeInfo: binding['obsCollDatasetProp']['value'],\n                                    nodeLabel: obsCollProp,\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n\n\n                                const conceptLabel= binding['litMentioningSearchLabel']['value'];\n                                const conceptId = getPrefixedUri(binding['skosConcept']['value']);\n                                console.log('conceptId',conceptId)\n                                tmpD3Graph.nodes.push({\n                                    id: conceptId,\n                                    group: getGroupFromPrefixedUri(conceptId),\n                                    nodeInfo: `${binding['skosConcept']['value']} :\\n  ${conceptLabel}`,\n                                    nodeLabel: conceptId,\n                                    nodeType: 'resource' // literal, resource, property, \n                                });\n  \n\n\n                                const searchTermRelationId = `nodeIdx_${tmpD3Graph.nodes.length}`;\n                                tmpD3Graph.nodes.push({\n                                    id: searchTermRelationId,\n                                    group: 4,\n                                    nodeInfo: 'search term relation: within',\n                                    nodeLabel: \"within\",\n                                    nodeType: 'property' // literal, resource, property, \n                                });\n                                \n\n                                // search label to conceptId\n\n                                tmpD3Graph.links.push({\n                                    source: tmpD3Graph.nodes[0].id,\n                                    target: searchTermRelationId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: searchTermRelationId,\n                                    target: conceptId,\n                                    value: 1\n                                });\n\n                                   \n                                // Dataset to ObsColl to conceptId\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollDatasetPropId,\n                                    target: datasetNodeId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollDatasetPropId,\n                                    target: obsCollNodeId,\n                                    value: 1\n                                });\n\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollNodeId,\n                                    target: obsCollPropId,\n                                    value: 1\n                                });\n\n                                tmpD3Graph.links.push({\n                                    source: obsCollPropId,\n                                    target: conceptId,\n                                    value: 1\n                                });\n\n                            })\n                        }\n                    }\n                }\n\n            }\n\n            console.log('tmpD3Graph:', tmpD3Graph);\n           resolve(true);\n             \n        } catch (error) {\n            console.log('Error:', error);\n            resolve(false);\n        }\n        })\n    }\n\n    async function explainDatasets(tmpD3Graph){\n        let updatedExplanation = true;\n        // updatedExplanation &&=await explainDatasetsFromDescAndTitle(tmpD3Graph);\n        // updatedExplanation &&= await explainDatasetsFromObsCol(tmpD3Graph);\n        updatedExplanation &&= await explainDatasetsFromObsColParams(tmpD3Graph);\n\n\n        setD3Graph(tmpD3Graph);\n        setCurrentlyExplainedTerm(termInfo.term);\n\n        return updatedExplanation;\n    }\n\n    useEffect(  function () {\n\n            console.log(`useEffect DatasetDiscoveryExplainedSVGGraph`)\n            console.log(` termInfo.term`,termInfo.term)\n            console.log(` currentExlainedTerm`, currentlyExplainedTerm )\n            console.log(` currentlyVisualisedTerm`, currentlyVisualisedTerm )\n\n            console.log(` d3Graph`,d3Graph)\n\n            if(termInfo.term === '' ){\n                return;\n            }\n               \n\n            if(d3Graph.nodes.length===0 || termInfo.term != currentlyExplainedTerm ){\n\n                const tmpD3Graph = {\n                    nodes:[\n                        {\n                            id:'nodeIdx_0',\n                            group:4,\n                            nodeInfo:'Search term: '+termInfo.term,\n                            nodeLabel: termInfo.term,\n                            nodeType: 'literal' // literal, resource, property, \n                        }\n                    ],\n                    links:[\n                        // {\n                        //     source: String,\n                        //     target: String,\n                        //     value: Int16Array  // default 1\n                        //     linkType : String  // in, out\n                        // }\n                    ]\n                };\n                \n                // TODO Remove\n                // let updatedExplanation = false;\n                // explainDatasetsFromDescAndTitle(tmpD3Graph).then( (explanationReceived) =>{\n                    \n                //     updatedExplanation ||=  explanationReceived;\n\n                //     if(updatedExplanation){\n                //         setD3Graph(tmpD3Graph);\n                //         setCurrentlyExplainedTerm(termInfo.term);\n                //     }\n\n\n                //     console.log(` updatedExplanation: ${updatedExplanation}`)\n                // })\n\n                explainDatasets(tmpD3Graph);\n\n                // NOTE that since explainDatasetsFromDescAndTitle is asynchonous the main process may return before reaching the end of explainDatasetsFromDescAndTitle\n                if(currentlyVisualisedTerm!==''){\n                    if(d3.selectAll('g')){\n                        d3.selectAll('g').remove();\n                        console.log(`  d3.selectAll('g').remove()`);\n                    }\n                }\n\n                return;\n\n            }\n            \n            if(d3Graph.nodes.length>0 && (currentlyVisualisedTerm==='' || currentlyExplainedTerm !== currentlyVisualisedTerm )){\n\n                console.log(` draw d3Graph `,d3Graph);\n\n                 // Specify the color scale. or schemePaired for 12 colors\n                const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n                // The force simulation mutates links and nodes, so create a copy\n                // so that re-evaluating this cell produces the same result.\n                const links = d3Graph.links.map(d => (Object.create(d)));\n                const nodes = d3Graph.nodes.map(d => (Object.create(d)));\n\n                \n                \n                // Create a simulation with several forces.\n                const simulation = d3.forceSimulation(nodes)\n                    .force(\"link\", d3.forceLink(links).id(d => d.id))\n                    .force(\"charge\", d3.forceManyBody())\n                    .force(\"center\", d3.forceCenter(width / 2, height / 2))\n                    // .force(\"collide\", d3.forceCollide().radius(30).strength(1) ) // distance between node\n                    .on(\"tick\", ticked);\n\n                // Create the SVG container.\n                const svg = d3.select(\"svg\")\n                    .attr(\"width\", width)\n                    .attr(\"height\", height)\n                    .attr(\"viewBox\", [0, 0, width, height])\n                    .attr(\"style\", \"max-width: 100%; height: auto;\")\n                ;\n\n\n                // Add a line for each link, and a circle for each node.\n                const link = svg.append(\"g\")\n                    .attr(\"stroke\", \"#999\")\n                    .attr(\"stroke-opacity\", 0.6)\n                    .selectAll(\"line\")\n                    .data(links)\n                    .join(\"line\")\n                    .attr(\"stroke-width\", d => Math.sqrt(d.value));\n\n                const node = svg.append(\"g\")\n                    .attr(\"stroke\", \"#fff\")\n                    .attr(\"stroke-width\", 1.5)\n                    .selectAll(\".node\")\n                    .data(nodes)\n                    .join(\"g\")\n                    .attr('class', 'node');\n                \n                node.append(\"circle\")\n                    .attr(\"r\", d => d.nodeType.includes('property')?3:10 )\n                    .attr(\"fill\", d => color(d.group));\n\n                // Add a drag behavior.\n                node.call(d3.drag()\n                    .on(\"start\", dragstarted)\n                    .on(\"drag\", dragged)\n                    .on(\"end\", dragended));\n\n\n                node.append(\"title\")\n                    .text(function(d){ return d.nodeInfo ;})\n                    .style('font-family', 'sans-serif')\n                    .style('font-size', '10px')\n                    .attr('x', 11)\n                    .attr('y', 3);\n\n                node.append(\"text\")\n                    .text(d => d.nodeLabel)\n                    // .style('fill', '#000')\n                    .style('stroke', 'Blue') // #000\n                    .style('stroke-width', 0.1)\n                    .style('font-family', 'sans-serif')\n                    .style('font-size', '13px')\n                    .attr(\"text-anchor\",\"start\")\n                    .attr('x', 11)\n                    .attr('y', 3)\n                ;\n\n                simulation\n                    .nodes(nodes)\n                    .on(\"tick\", ticked);\n              \n                simulation.force(\"link\")\n                    .links(links);\n                   \n\n                \n\n                // Set the position attributes of links and nodes each time the simulation ticks.\n                function ticked() {\n                    link\n                        .attr(\"x1\", d => d.source.x) // DatasetDiscoveryExplainedSVGGraph.js:364 Uncaught TypeError: Cannot read properties of undefined (reading 'attr')\n                        .attr(\"y1\", d => d.source.y)\n                        .attr(\"x2\", d => d.target.x)\n                        .attr(\"y2\", d => d.target.y);\n\n                    node\n                        // .attr(\"cx\", d => d.x)\n                        // .attr(\"cy\", d => d.y);\n                        .attr(\"transform\", function(d) {\n                            return \"translate(\" + d.x + \",\" + d.y + \")\";\n                          })\n                }\n\n                // Reheat the simulation when drag starts, and fix the subject position.\n                function dragstarted(event) {\n                    if (!event.active) simulation.alphaTarget(0.3).restart();\n                    event.subject.fx = event.subject.x;\n                    event.subject.fy = event.subject.y;\n                }\n\n                // Update the subject (dragged node) position during drag.\n                function dragged(event) {\n                    event.subject.fx = event.x;\n                    event.subject.fy = event.y;\n                }\n\n                // Restore the target alpha so the simulation cools after dragging ends.\n                // Unfix the subject position now that it’s no longer being dragged.\n                function dragended(event) {\n                    if (!event.active) simulation.alphaTarget(0);\n                    event.subject.fx = null;\n                    event.subject.fy = null;\n                }\n\n                // When this cell is re-run, stop the previous simulation. (This doesn’t\n                // really matter since the target alpha is zero and the simulation will\n                // stop naturally, but it’s a good practice.)\n                //  simulation.stop();\n\n\n                setCurrentlyVisualisedTerm(currentlyExplainedTerm);\n\n            }\n\n\n\n        }, [termInfo, d3Graph] // nodes, links\n    );\n\n    return(\n        <div>\n            {d3Graph.nodes.length>0?(\n                <svg id='svg'\n                    // ref={svgRef}\n                    style={{\n                        width,\n                        height\n                    }}\n                    width={width}\n                    height={height}\n                />\n            ):(\n                <></>\n            )\n            }\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}