{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Table from'react-bootstrap/Table';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BindingVarTable(){var endpoint_uri='http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';var query_txt='select * where {?s ?p ?o} limit 10';var _useState=useState([{s:{value:'s1'},p:{value:'p1'},o:{object:'o1'}}]),_useState2=_slicedToArray(_useState,2),bindings=_useState2[0],setBindings=_useState2[1];var _useState3=useState(['s','p','o']),_useState4=_slicedToArray(_useState3,2),varNames=_useState4[0],setVarNames=_useState4[1];function fetchData(_x,_x2){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url,d){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve,reject){var response,jsonData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(url,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+d});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:jsonData=_context2.sent;if(jsonData){if(jsonData.head){if(jsonData.head.vars){setVarNames(jsonData.head.vars);}}if(jsonData.results){if(jsonData.results.bindings){setBindings(jsonData.results.bindings);}}}console.log('varNames:',varNames);console.log('bindings:',bindings);console.log('bindings[\"s\"].value',bindings[\"s\"].value);if(jsonData){resolve();}else{reject(new Error('Empty answer'));}_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](0);console.log('Error:',_context2.t0);case 17:case\"end\":return _context2.stop();}},_callee2,null,[[0,14]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}()));case 1:case\"end\":return _context3.stop();}},_callee3);}));return _fetchData.apply(this,arguments);};useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetchData(endpoint_uri,query_txt);case 2:resp=_context.sent;case 3:case\"end\":return _context.stop();}},_callee);})),[]);return/*#__PURE__*/_jsx(\"div\",{children:varNames?/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:varNames.map(function(v){return v;})})})}),/*#__PURE__*/_jsx(\"tbody\",{})]}):/*#__PURE__*/_jsx(\"p\",{children:\" Data not yet available ... \"})});}export default BindingVarTable;","map":{"version":3,"names":["useState","useEffect","Table","jsx","_jsx","jsxs","_jsxs","BindingVarTable","endpoint_uri","query_txt","_useState","s","value","p","o","object","_useState2","_slicedToArray","bindings","setBindings","_useState3","_useState4","varNames","setVarNames","fetchData","_x","_x2","_fetchData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","url","d","wrap","_callee3$","_context3","prev","next","abrupt","Promise","_ref2","_callee2","resolve","reject","response","jsonData","_callee2$","_context2","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","sent","json","head","vars","results","console","log","Error","t0","stop","_x3","_x4","_callee","resp","_callee$","_context","children","striped","bordered","hover","size","map","v"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/BindingVarTable.js"],"sourcesContent":["import {useState,useEffect} from 'react'\nimport Table from 'react-bootstrap/Table';\n\nfunction BindingVarTable(){\n\n    const endpoint_uri = 'http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';\n    const query_txt = 'select * where {?s ?p ?o} limit 10';\n    \n\n    const [bindings, setBindings] = useState([{s:{value: 's1'},p:{value: 'p1'},o:{object:'o1'}}]);\n    const [varNames,setVarNames] = useState(['s','p','o']);\n\n    async function  fetchData (url, d )  {\n        return new Promise (async(resolve,reject) =>{\n        try {   \n            \n            const response = await fetch(url,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                     \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+d\n            }\n            )            \n            \n            \n            const jsonData = await response.json();\n            \n            \n            \n            \n            if(jsonData){\n\n\n                if(jsonData.head){\n                    if(jsonData.head.vars){\n                        setVarNames(jsonData.head.vars);\n                    }\n                }\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        setBindings(jsonData.results.bindings);\n                    }}\n            }\n\n            console.log('varNames:', varNames); \n            console.log('bindings:', bindings);\n\n            console.log('bindings[\"s\"].value', bindings[\"s\"].value)\n\n            \n                if(jsonData){\n                    resolve();\n                }else{\n                    reject(new Error('Empty answer'));\n                }\n\n            \n\n\n        } catch (error) {\n            console.log('Error:', error);\n            \n        }\n    })\n    };\n\n    useEffect (\n        async () =>{\n            const resp =  await fetchData(endpoint_uri, query_txt);\n        },\n        []\n    );\n\n    return(\n        <div>\n            {varNames ?(\n                <Table striped bordered hover size='sm'>\n                    <thead>\n                        <tr>\n                            <th>{varNames.map(v => v )}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {/* <tr>\n                        <td>{jsonResponse.results.bindings.map(tuple =>  {\n                            varNames.map(v => tuple[v].value)\n                        })}</td>\n                    </tr> */}\n                    {/* <tr>\n                        {\n                            bindings.map(tuple =>\n                                varNames.map(varName =>{\n                                         <td>{tuple['\"'+{varName}+'\"'][\"value\"]}</td>\n                                    })\n                            )\n                        }\n                    </tr> */}\n                    </tbody>\n\n                </Table>\n            ):(\n                <p> Data not yet available ... </p>\n            )}\n        </div>\n    );\n}\nexport default BindingVarTable;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}