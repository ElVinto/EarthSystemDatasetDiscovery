{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import InputGroup from'react-bootstrap/InputGroup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BindingVarTable(){var endpoint_uri='http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';var query_txt='select * where {?s ?p ?o} limit 10';// const [varNames,setVarNames] = useState([\"s\",\"p\",\"o\"]);\n// const [bindings, setBindings] = useState([\n//     {s:{value: 's1'},p:{value: 'p1'},o:{value:'o1'}},\n//     {s:{value: 's2'},p:{value: 'p2'},o:{value:'o2'}}\n// ]);\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),varNames=_useState2[0],setVarNames=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),bindings=_useState4[0],setBindings=_useState4[1];function fetchData(_x,_x2){return _fetchData.apply(this,arguments);}// useEffect (\n//     async () =>{\n//          const resp =  await fetchData(endpoint_uri, query_txt);\n//     },\n//     [bindings]\n// );\nfunction _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url,d){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(resolve,reject){var response,jsonData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(bindings==![]){resolve();}_context.next=4;return fetch(url,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+d});case 4:response=_context.sent;_context.next=7;return response.json();case 7:jsonData=_context.sent;console.log('jsonData:',jsonData);if(jsonData){if(jsonData.results){if(jsonData.results.bindings){setBindings(jsonData.results.bindings);}}if(jsonData.head){if(jsonData.head.vars){setVarNames(jsonData.head.vars);}}}console.log('varNames:',varNames);console.log('bindings:',bindings);// console.log('bindings[0][s][\"value\"]: ', bindings[0][varNames[0]][\"value\"]);\n// bindings.map(binding =>\n//     varNames.map(varName => {\n//         console.log(\"<td> \", binding[varName][\"value\"], \" </td>\")\n//         })\n// )\nif(jsonData){resolve();}else{reject(new Error('Empty answer'));}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log('Error:',_context.t0);reject(new Error('Something wrong happen'));case 19:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function(_x3,_x4){return _ref.apply(this,arguments);};}()));case 1:case\"end\":return _context2.stop();}},_callee2);}));return _fetchData.apply(this,arguments);}function submit(){fetchData(endpoint_uri,query_txt).then(function(response){console.log(response);});}function validateInputLabel(){return/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Control,{placeholder:\"input label\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",id:\"button-addon\",onClick:submit(),children:\"Search\"})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:validateInputLabel()}),/*#__PURE__*/_jsx(\"div\",{children:varNames?/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"lg\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:varNames.map(function(v){return/*#__PURE__*/_jsxs(\"th\",{children:[\" \",v,\" \"]});})})}),/*#__PURE__*/_jsx(\"tbody\",{children:bindings.map(function(binding){return/*#__PURE__*/_jsx(\"tr\",{children:varNames.map(function(varName){return/*#__PURE__*/_jsxs(\"td\",{children:[\" \",binding[varName][\"value\"],\" \"]});})});})})]}):/*#__PURE__*/_jsx(\"p\",{children:\" Data not yet available ... \"})})]});}","map":{"version":3,"names":["useState","useEffect","Table","Button","Form","InputGroup","jsx","_jsx","jsxs","_jsxs","BindingVarTable","endpoint_uri","query_txt","_useState","_useState2","_slicedToArray","varNames","setVarNames","_useState3","_useState4","bindings","setBindings","fetchData","_x","_x2","_fetchData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","url","d","wrap","_callee2$","_context2","prev","next","abrupt","Promise","_ref","_callee","resolve","reject","response","jsonData","_callee$","_context","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","sent","json","console","log","results","head","vars","Error","t0","stop","_x3","_x4","submit","then","validateInputLabel","className","children","Control","placeholder","variant","id","onClick","striped","bordered","hover","size","map","v","binding","varName"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/BindingVarTable.js"],"sourcesContent":["import {useState,useEffect} from 'react'\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\n\nexport default function BindingVarTable(){\n\n    const endpoint_uri = 'http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';\n    const query_txt = 'select * where {?s ?p ?o} limit 10';\n    \n\n    \n    // const [varNames,setVarNames] = useState([\"s\",\"p\",\"o\"]);\n    // const [bindings, setBindings] = useState([\n    //     {s:{value: 's1'},p:{value: 'p1'},o:{value:'o1'}},\n    //     {s:{value: 's2'},p:{value: 'p2'},o:{value:'o2'}}\n    // ]);\n\n    const [varNames,setVarNames] = useState([]);\n    const [bindings, setBindings] = useState([]);\n\n\n    async function  fetchData (url, d )  {\n        return new Promise (async(resolve,reject) =>{\n        try {   \n            \n            if(bindings == ![]){\n                resolve();\n            }\n\n            const response = await fetch(url,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                     \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+d\n            }\n            )            \n            \n            \n            const jsonData = await response.json();\n            \n            console.log('jsonData:', jsonData);\n            \n            \n            if(jsonData){\n\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        setBindings(jsonData.results.bindings);\n                    }}\n\n                if(jsonData.head){\n                    if(jsonData.head.vars){\n                        setVarNames(jsonData.head.vars);\n                    }\n                }\n                \n            }\n\n            console.log('varNames:', varNames); \n            console.log('bindings:', bindings);\n\n            // console.log('bindings[0][s][\"value\"]: ', bindings[0][varNames[0]][\"value\"]);\n\n            // bindings.map(binding =>\n            //     varNames.map(varName => {\n            //         console.log(\"<td> \", binding[varName][\"value\"], \" </td>\")\n            //         })\n            // )\n\n            \n                if(jsonData){\n                    resolve();\n                }else{\n                    reject(new Error('Empty answer'));\n                }\n\n            \n\n\n        } catch (error) {\n            console.log('Error:', error);\n            reject(new Error('Something wrong happen'));\n            \n        }\n    })\n    }\n\n    // useEffect (\n    //     async () =>{\n    //          const resp =  await fetchData(endpoint_uri, query_txt);\n    //     },\n    //     [bindings]\n    // );\n\n    function submit(){\n     fetchData(endpoint_uri, query_txt).then( response => { console.log(response)});\n    }\n\n    function validateInputLabel(){\n        return(\n            <InputGroup className=\"mb-3\">\n            <Form.Control\n              placeholder=\"input label\"\n              aria-label=\"Recipient's username\"\n              aria-describedby=\"basic-addon\"\n            />\n            <Button variant=\"outline-secondary\" id=\"button-addon\" onClick={submit()}>\n              Search\n            </Button>\n          </InputGroup>\n        );\n    }\n\n    return(\n        <div>\n        <div>\n            {validateInputLabel()}\n        </div>\n        <div>\n            {varNames ?(\n                <Table striped bordered hover size='lg' >\n                    <thead>\n                        <tr>\n                            {varNames.map(v => <th> {v} </th> )}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {bindings.map(binding =>\n                            <tr>\n                                {varNames.map(varName => \n                                    <td> {binding[varName][\"value\"]} </td>\n                                )}\n                            </tr>\n                        )}\n                    </tbody>\n\n                </Table>\n            ):(\n                <p> Data not yet available ... </p>\n            )}\n        </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}