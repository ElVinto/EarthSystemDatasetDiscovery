{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as d3 from'd3';import{useEffect,useState,useRef}from\"react\";import{RADIUS,drawNetwork}from'./drawNetwork';import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function DatasetDiscoveryExplainedGraph(_ref){var kbUri=_ref.kbUri,termInfo=_ref.termInfo,width=_ref.width,height=_ref.height;var prefix2uri={'skos:':'http://www.w3.org/2004/02/skos/core#','sosa:':'http://www.w3.org/ns/sosa/','ucmm:':'http://purl.org/ucmm#','rdf:':'http://www.w3.org/1999/02/22-rdf-syntax-ns#','dcat:':'http://www.w3.org/ns/dcat#','dcterms:':'http://purl.org/dc/terms/','i1:':'http://example.org/b2a5ed57-5c4e-4596-b803-d2ac7f5b9991#','i2:':'http://example.org/51824c86-ae0f-442f-9df2-e86244984ba3#','i3:':'http://example.org/97b4842b-94b3-4205-8781-476813d8177b#','i4:':'http://example.org/e747d804-a5d1-4fd1-bd9b-306a8ebd4904#','i5:':'http://example.org/de5b570a-b560-4e84-a755-52c2aa499874#','i6:':'http://example.org/3df904de-e47d-4bf9-85a0-7c0942aff8b6#','i7:':'http://example.org/BDML_TCHR#','i8:':'http://example.org/4f676524-a831-41fe-9afb-d95f4e7597e3#','i9:':'http://example.org/f4968943-ad6f-4563-a737-58fe3285fb3c#','i10:':'http://example.org/17e24931-ccd6-4de0-a01c-9ffb3be88461#'};function getPrefixFromUri(resourceUri){// console.log(`getPrefixFromUri(resourceUri: ', ${resourceUri})`);\nvar prefix='';Object.entries(prefix2uri).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),prefixKey=_ref3[0],uri=_ref3[1];if(resourceUri.includes(uri)){console.log(\" resourceUri.includes(\".concat(uri,\")\"));prefix=prefixKey;return;}});// console.log(` prefix: ', ${prefix}`);\nreturn prefix;}function getPrefixedUri(resourceUri){// console.log(`getPrefixedUri(resourceUri: ', ${resourceUri})`);\nvar prefix=getPrefixFromUri(resourceUri);if(prefix==='')return resourceUri;var prefixUri=prefix2uri[prefix];var prefixedUri=resourceUri.replace(prefixUri,prefix);// console.log(` prefixedUri: ', ${prefixedUri}`);\nreturn prefixedUri;}var prefix2group={// THEAI ODATIS FORMATER AERIS\n'i1:':1,'i2:':1,'i3:':1,'i4:':2,'i5:':2,'i6:':2,'i7:':3,'i8:':3,'i9:':3,'i10:':3};function getGroupFromPrefixedUri(prefixedUri){var prefix=prefixedUri.substring(0,prefixedUri.indexOf(\":\")+1);if(prefix2group[prefix]){return prefix2group[prefix];}else{return 4;}}var _useState=useState({nodes:[// {\n//     id: String,\n//     group:Int32Array,\n// }\n],links:[// {\n//     source: String,\n//     target: String,\n//     value: Int16Array\n// }\n]}),_useState2=_slicedToArray(_useState,2),d3Graph=_useState2[0],setD3Graph=_useState2[1];// Todo instanciate in case of several graph manipulations\n// const [spod,setSPOD]= useState({\n//     subjects: [],\n//     properties: [],\n//     objects: [],\n//     d3LinkIndexes: [] //\n// });\nfunction xQueryDatasetsFromDescAndTitle(){return\"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\n        PREFIX sosa: <http://www.w3.org/ns/sosa/>\\n        PREFIX ucmm: <http://purl.org/ucmm#> \\n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \\n        PREFIX dcat: <http://www.w3.org/ns/dcat#> \\n        PREFIX dcterms: <http://purl.org/dc/terms/> \\n        SELECT DISTINCT ?dataset ?datasetProp ?litMentioningSearchLabel\\n        WHERE{\\n          VALUES ?datasetProp {dcterms:description dcterms:title}\\n          ?dataset rdf:type dcat:Dataset . \\n          ?dataset ?datasetProp ?litMentioningSearchLabel. \\n          FILTER ( \\n            regex(?litMentioningSearchLabel,\\\"\".concat(termInfo.term,\"\\\",\\\"i\\\") \\n          )\\n          FILTER (\\n            lang(?litMentioningSearchLabel)=\\\"en\\\"\\n          )\\n        }\").toString().replace('\\n',' ');}var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentExlainedTerm=_useState4[0],setCurrentExplainedTerm=_useState4[1];function explainDatasetsFromDescAndTitle(_x){return _explainDatasetsFromDescAndTitle.apply(this,arguments);}function _explainDatasetsFromDescAndTitle(){_explainDatasetsFromDescAndTitle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(tmpD3Graph){var queryTxt,response,jsonData,subjects,properties,objects;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(termInfo.term){_context2.next=3;break;}return _context2.abrupt(\"return\",false);case 3:console.log('explainDatasetsFromDescAndTitle()');console.log(' kbUri : ',kbUri);console.log(' termInfo.term : ',termInfo.term);queryTxt=xQueryDatasetsFromDescAndTitle();_context2.next=9;return fetch(kbUri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt});case 9:response=_context2.sent;_context2.next=12;return response.json();case 12:jsonData=_context2.sent;console.log('jsonData:',jsonData);subjects=[];properties=[];objects=[];if(jsonData){if(jsonData.results){if(jsonData.results.bindings){if(jsonData.results.bindings.length>0){jsonData.results.bindings.map(function(binding){var datasetNode=getPrefixedUri(binding['dataset']['value']);var datasetProp=getPrefixedUri(binding['datasetProp']['value']);var datasetPropNode=datasetNode.substring(0,datasetNode.indexOf(\":\")+1)+datasetProp.substring(datasetProp.indexOf(\":\")+1);var litMentioningSearchLabel=binding['litMentioningSearchLabel']['value'];if(!tmpD3Graph.nodes.includes(datasetNode)){tmpD3Graph.nodes.push({id:datasetNode,group:getGroupFromPrefixedUri(datasetNode)});}if(!tmpD3Graph.nodes.includes(datasetPropNode)){tmpD3Graph.nodes.push({id:datasetPropNode,group:getGroupFromPrefixedUri(datasetPropNode)});}tmpD3Graph.links.push({source:tmpD3Graph.nodes[0].id,target:datasetPropNode,value:1});tmpD3Graph.links.push({source:datasetNode,target:datasetPropNode,value:1});});}}}}console.log('tmpD3Graph:',tmpD3Graph);return _context2.abrupt(\"return\",true);case 22:_context2.prev=22;_context2.t0=_context2[\"catch\"](0);console.log('Error:',_context2.t0);return _context2.abrupt(\"return\",false);case 26:case\"end\":return _context2.stop();}},_callee2,null,[[0,22]]);}));return _explainDatasetsFromDescAndTitle.apply(this,arguments);}var canvasRef=useRef(null);// The force simulation mutates links and nodes, so create a copy first\n// Node positions are initialized by d3\n// let links= d3Graph.links.map((d) => ({ ...d }));\n// let nodes= d3Graph.nodes.map((d) => ({ ...d }));\nuseEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var tmpD3Graph,updatedExplanation,links,nodes,canvas,context;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(d3Graph.nodes.length===0||termInfo.term!==currentExlainedTerm)){_context.next=10;break;}tmpD3Graph={nodes:[{id:'searchTerm',group:4}],links:[// {\n//     source: String,\n//     target: String,\n//     value: Int16Array\n// }\n]};// explainDatasetsFromDescAndTitle(tmpD3Graph).then( (updatedExplanation) =>{\n//     console.log(` updatedExplanation: ${updatedExplanation}`)\n//     if(updatedExplanation){\n//         setD3Graph(tmpD3Graph);\n//     }\n// })\nupdatedExplanation=false;_context.t0=updatedExplanation;_context.next=6;return explainDatasetsFromDescAndTitle(tmpD3Graph);case 6:updatedExplanation=_context.t0&=_context.sent;if(updatedExplanation){setD3Graph(tmpD3Graph);setCurrentExplainedTerm(termInfo.term);}_context.next=18;break;case 10:console.log(\" draw d3Graph :\".concat(d3Graph));// The force simulation mutates links and nodes, so create a copy first\n// Node positions are initialized by d3\nlinks=d3Graph.links.map(function(d){return _objectSpread({},d);});nodes=d3Graph.nodes.map(function(d){return _objectSpread({},d);});canvas=canvasRef.current;context=canvas===null||canvas===void 0?void 0:canvas.getContext('2d');if(context){_context.next=17;break;}return _context.abrupt(\"return\");case 17:// run d3-force to find the position of nodes on the canvas\nd3.forceSimulation(nodes)// list of forces we apply to get node positions\n.force('link',d3.forceLink(links).id(function(d){return d.id;})// Force #1: links between nodes\n).force('collide',d3.forceCollide().radius(RADIUS))// Force #2: avoid node overlaps\n.force('charge',d3.forceManyBody())// Force #3: attraction or repulsion between nodes\n.force('center',d3.forceCenter(width/2,height/2))// Force #4: nodes are attracted by the center of the chart area\n// at each iteration of the simulation, draw the network diagram with the new node positions\n.on('tick',function(){drawNetwork(context,width,height,nodes,links);});case 18:case\"end\":return _context.stop();}},_callee);})),[width,height,termInfo.term,d3Graph]// nodes, links\n);return/*#__PURE__*/_jsx(\"div\",{children:d3Graph.nodes.length>0?/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{width:width,height:height},width:width,height:height}):/*#__PURE__*/_jsx(_Fragment,{})});}","map":{"version":3,"names":["d3","useEffect","useState","useRef","RADIUS","drawNetwork","React","jsx","_jsx","Fragment","_Fragment","DatasetDiscoveryExplainedGraph","_ref","kbUri","termInfo","width","height","prefix2uri","getPrefixFromUri","resourceUri","prefix","Object","entries","map","_ref2","_ref3","_slicedToArray","prefixKey","uri","includes","console","log","concat","getPrefixedUri","prefixUri","prefixedUri","replace","prefix2group","getGroupFromPrefixedUri","substring","indexOf","_useState","nodes","links","_useState2","d3Graph","setD3Graph","xQueryDatasetsFromDescAndTitle","term","toString","_useState3","_useState4","currentExlainedTerm","setCurrentExplainedTerm","explainDatasetsFromDescAndTitle","_x","_explainDatasetsFromDescAndTitle","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","tmpD3Graph","queryTxt","response","jsonData","subjects","properties","objects","wrap","_callee2$","_context2","prev","next","abrupt","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","sent","json","results","bindings","length","binding","datasetNode","datasetProp","datasetPropNode","litMentioningSearchLabel","push","id","group","source","target","value","t0","stop","canvasRef","_callee","updatedExplanation","canvas","context","_callee$","_context","d","_objectSpread","current","getContext","forceSimulation","force","forceLink","forceCollide","radius","forceManyBody","forceCenter","on","children","ref","style"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/DatasetDiscoveryExplainedGraph.js"],"sourcesContent":["import * as d3 from 'd3';\nimport { useEffect, useState, useRef } from \"react\";\nimport { RADIUS, drawNetwork } from './drawNetwork';\nimport React from 'react';\n\n\n\nexport default function DatasetDiscoveryExplainedGraph ({kbUri, termInfo, width, height}){\n\n    const prefix2uri = {\n        'skos:':'http://www.w3.org/2004/02/skos/core#',\n        'sosa:': 'http://www.w3.org/ns/sosa/',\n        'ucmm:':'http://purl.org/ucmm#',\n        'rdf:': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n        'dcat:':'http://www.w3.org/ns/dcat#',\n        'dcterms:':'http://purl.org/dc/terms/',\n\n        'i1:':'http://example.org/b2a5ed57-5c4e-4596-b803-d2ac7f5b9991#',\n        'i2:':'http://example.org/51824c86-ae0f-442f-9df2-e86244984ba3#',\n        'i3:':'http://example.org/97b4842b-94b3-4205-8781-476813d8177b#',\n        'i4:':'http://example.org/e747d804-a5d1-4fd1-bd9b-306a8ebd4904#',\n        'i5:': 'http://example.org/de5b570a-b560-4e84-a755-52c2aa499874#',\n        'i6:': 'http://example.org/3df904de-e47d-4bf9-85a0-7c0942aff8b6#',\n        'i7:': 'http://example.org/BDML_TCHR#',\n        'i8:': 'http://example.org/4f676524-a831-41fe-9afb-d95f4e7597e3#',\n        'i9:': 'http://example.org/f4968943-ad6f-4563-a737-58fe3285fb3c#',\n        'i10:': 'http://example.org/17e24931-ccd6-4de0-a01c-9ffb3be88461#'\n    };\n\n    function getPrefixFromUri(resourceUri){\n\n        // console.log(`getPrefixFromUri(resourceUri: ', ${resourceUri})`);\n\n        let prefix = '';\n        Object.entries(prefix2uri).map( ([prefixKey,uri]) => {\n            if(resourceUri.includes(uri)){\n                console.log(` resourceUri.includes(${uri})`);\n                prefix = prefixKey;\n                return ;\n            }\n        })\n\n        // console.log(` prefix: ', ${prefix}`);\n\n        return prefix;\n    }\n    \n    function getPrefixedUri(resourceUri){\n\n        // console.log(`getPrefixedUri(resourceUri: ', ${resourceUri})`);\n\n        const prefix = getPrefixFromUri(resourceUri);\n\n        if(prefix==='')\n            return resourceUri;\n\n        const prefixUri = prefix2uri[prefix];\n        const prefixedUri = resourceUri.replace(prefixUri,prefix);\n\n        // console.log(` prefixedUri: ', ${prefixedUri}`);\n\n        return prefixedUri;\n    }\n\n    const prefix2group ={ // THEAI ODATIS FORMATER AERIS\n        'i1:': 1,\n        'i2:': 1,\n        'i3:': 1,\n        'i4:': 2,\n        'i5:': 2,\n        'i6:': 2,\n        'i7:': 3,\n        'i8:': 3,\n        'i9:': 3,\n        'i10:': 3,\n    }\n\n    function getGroupFromPrefixedUri(prefixedUri){\n        const prefix= prefixedUri.substring(0,prefixedUri.indexOf(\":\")+1)\n\n        \n        if(prefix2group[prefix]){\n            return prefix2group[prefix];\n        }else{\n            return 4;\n        }\n    }\n\n\n    const [d3Graph,setD3Graph]= useState({\n        nodes:[\n            // {\n            //     id: String,\n            //     group:Int32Array,\n            // }\n        ],\n        links:[\n            // {\n            //     source: String,\n            //     target: String,\n            //     value: Int16Array\n            // }\n        ]\n    });\n\n    // Todo instanciate in case of several graph manipulations\n    // const [spod,setSPOD]= useState({\n    //     subjects: [],\n    //     properties: [],\n    //     objects: [],\n    //     d3LinkIndexes: [] //\n    // });\n\n    function xQueryDatasetsFromDescAndTitle(){\n        return (`PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n        PREFIX sosa: <http://www.w3.org/ns/sosa/>\n        PREFIX ucmm: <http://purl.org/ucmm#> \n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> \n        PREFIX dcat: <http://www.w3.org/ns/dcat#> \n        PREFIX dcterms: <http://purl.org/dc/terms/> \n        SELECT DISTINCT ?dataset ?datasetProp ?litMentioningSearchLabel\n        WHERE{\n          VALUES ?datasetProp {dcterms:description dcterms:title}\n          ?dataset rdf:type dcat:Dataset . \n          ?dataset ?datasetProp ?litMentioningSearchLabel. \n          FILTER ( \n            regex(?litMentioningSearchLabel,\"${termInfo.term}\",\"i\") \n          )\n          FILTER (\n            lang(?litMentioningSearchLabel)=\"en\"\n          )\n        }`).toString().replace('\\n',' ');\n    }\n\n\n    const [currentExlainedTerm, setCurrentExplainedTerm] = useState('');\n\n    async function explainDatasetsFromDescAndTitle (tmpD3Graph) {\n\n        try {  \n\n            if(!termInfo.term){\n                return false;\n            }\n\n            console.log('explainDatasetsFromDescAndTitle()')\n            console.log(' kbUri : ',kbUri);\n            console.log(' termInfo.term : ',termInfo.term);\n\n            \n\n            const queryTxt = xQueryDatasetsFromDescAndTitle();\n\n            const response = await fetch(kbUri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                    \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt\n            }\n            )            \n            \n            const jsonData = await response.json();\n            \n            console.log('jsonData:', jsonData);\n            \n            let subjects= [];\n            let properties = [];\n            let objects = [];\n\n            \n\n            if(jsonData){\n\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        if(jsonData.results.bindings.length>0){\n\n                            jsonData.results.bindings.map( binding =>{\n                                const datasetNode =  getPrefixedUri(binding['dataset']['value']);\n                                const datasetProp = getPrefixedUri(binding['datasetProp']['value']);\n\n                                const datasetPropNode = datasetNode.substring(0,datasetNode.indexOf(\":\")+1)\n                                + datasetProp.substring(datasetProp.indexOf(\":\")+1);\n\n                                const litMentioningSearchLabel= binding['litMentioningSearchLabel']['value'];\n\n                                \n                                if(!tmpD3Graph.nodes.includes(datasetNode)){\n                                    tmpD3Graph.nodes.push({\n                                        id: datasetNode,\n                                        group: getGroupFromPrefixedUri(datasetNode)\n                                    });\n                                }\n\n                                if(!tmpD3Graph.nodes.includes(datasetPropNode)){\n                                    tmpD3Graph.nodes.push({\n                                        id: datasetPropNode,\n                                        group: getGroupFromPrefixedUri(datasetPropNode)\n                                    });\n                                }\n\n                                tmpD3Graph.links.push({\n                                    source: tmpD3Graph.nodes[0].id,\n                                    target: datasetPropNode,\n                                    value: 1\n                                })\n\n                                tmpD3Graph.links.push({\n                                    source: datasetNode,\n                                    target: datasetPropNode,\n                                    value: 1\n                                })\n\n                                \n                            })\n                        }\n                    }\n                }\n\n            }\n\n            console.log('tmpD3Graph:', tmpD3Graph);\n           return true;\n             \n        } catch (error) {\n            console.log('Error:', error);\n            return false;\n        }\n    }\n\n    const canvasRef = useRef(null);\n\n    // The force simulation mutates links and nodes, so create a copy first\n    // Node positions are initialized by d3\n    // let links= d3Graph.links.map((d) => ({ ...d }));\n    // let nodes= d3Graph.nodes.map((d) => ({ ...d }));\n\n    useEffect(async function () {\n\n            if(d3Graph.nodes.length===0 || termInfo.term !== currentExlainedTerm){\n                const tmpD3Graph = {\n                    nodes:[\n                        {\n                            id:'searchTerm',\n                            group:4,\n                        }\n                    ],\n                    links:[\n                        // {\n                        //     source: String,\n                        //     target: String,\n                        //     value: Int16Array\n                        // }\n                    ]\n                };\n                \n                // explainDatasetsFromDescAndTitle(tmpD3Graph).then( (updatedExplanation) =>{\n                //     console.log(` updatedExplanation: ${updatedExplanation}`)\n\n                //     if(updatedExplanation){\n                //         setD3Graph(tmpD3Graph);\n                //     }\n                // })\n\n                let updatedExplanation = false;\n                updatedExplanation &= await explainDatasetsFromDescAndTitle(tmpD3Graph);\n                if(updatedExplanation){\n                    setD3Graph(tmpD3Graph);\n                    setCurrentExplainedTerm(termInfo.term);\n                }\n                \n            }else{\n\n                console.log(` draw d3Graph :${d3Graph}`);\n                \n                // The force simulation mutates links and nodes, so create a copy first\n                // Node positions are initialized by d3\n                const links= d3Graph.links.map((d) => ({ ...d }));\n                const nodes= d3Graph.nodes.map((d) => ({ ...d }));\n\n                const canvas = canvasRef.current;\n                const context = canvas?.getContext('2d');\n\n                if (!context) {\n                return;\n                }\n\n                // run d3-force to find the position of nodes on the canvas\n                d3.forceSimulation(nodes)\n\n                // list of forces we apply to get node positions\n                .force(\n                'link',\n                d3.forceLink(links).id((d) => d.id) // Force #1: links between nodes\n                )\n                .force('collide', d3.forceCollide().radius(RADIUS)) // Force #2: avoid node overlaps\n                .force('charge', d3.forceManyBody()) // Force #3: attraction or repulsion between nodes\n                .force('center', d3.forceCenter(width / 2, height / 2)) // Force #4: nodes are attracted by the center of the chart area\n\n                // at each iteration of the simulation, draw the network diagram with the new node positions\n                .on('tick', () => {\n                drawNetwork(context, width, height, nodes, links);\n                });\n            }\n        }, [width, height,termInfo.term,d3Graph] // nodes, links\n    );\n\n    return(\n        <div>\n            {d3Graph.nodes.length>0?(\n                <canvas\n                    ref={canvasRef}\n                    style={{\n                        width,\n                        height\n                    }}\n                    width={width}\n                    height={height}\n                />\n            ):(\n                <></>\n            )\n            }\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}