{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import InputGroup from'react-bootstrap/InputGroup';import{Card}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchLabelForm(_ref){var kbUri=_ref.kbUri,updateCallBack=_ref.updateCallBack;var _useState=useState('temperature'),_useState2=_slicedToArray(_useState,2),searchLabel=_useState2[0],setSearchLabel=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),storedLabels=_useState4[0],setStoredLabels=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),dataLoaded=_useState6[0],setDataLoaded=_useState6[1];function fetchStoredLabels(){return _fetchStoredLabels.apply(this,arguments);}function _fetchStoredLabels(){_fetchStoredLabels=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var queryTxt,endpoint_uri,response,jsonData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!dataLoaded){_context.next=3;break;}return _context.abrupt(\"return\");case 3:queryTxt='PREFIX skos: <http://www.w3.org/2004/02/skos/core#> '+'SELECT DISTINCT ?storedLabel WHERE {?concept skos:prefLabel ?storedLabel }';endpoint_uri=kbUri;_context.next=7;return fetch(endpoint_uri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt.replaceAll('\\n',' ')});case 7:response=_context.sent;_context.next=10;return response.json();case 10:jsonData=_context.sent;if(jsonData){if(jsonData.results){if(jsonData.results.bindings){setDataLoaded(true);setStoredLabels(jsonData.results.bindings);// console.log('jsonData.results.bindings',jsonData.results.bindings);\n}}}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[0,14]]);}));return _fetchStoredLabels.apply(this,arguments);}function handleSearchClick(){updateCallBack(searchLabel);console.log('update Search Label call back',searchLabel);}useEffect(function(){fetchStoredLabels();},[dataLoaded]);return dataLoaded?/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Search\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(InputGroup.Text,{id:\"searchLabelInputGroup\",children:\"Label :\"}),/*#__PURE__*/_jsx(Form.Control,{id:\"search label\",placeholder:\"Type a label\",\"aria-aria-label\":\"search label\",\"aria-describedby\":\"searchLabelInputGroup\"// autoComplete='on'\n// data = {['un','deux','trois']}\n,list:\"storeLabelListOption\",value:searchLabel,onChange:function onChange(e){return setSearchLabel(e.target.value);}}),/*#__PURE__*/_jsx(\"datalist\",{id:\"storeLabelListOption\",children:storedLabels.map(function(binding){return/*#__PURE__*/_jsx(\"option\",{children:binding.storedLabel.value});})})]}),/*#__PURE__*/_jsx(\"p\",{children:'  Selected : '+searchLabel}),/*#__PURE__*/_jsx(\"div\",{class:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(Button,{size:\"lg\",variant:\"outline-secondary\",id:\"button-search\",onClick:handleSearchClick,children:\"Retrieve Datasets\"})})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"loading ... \"});}","map":{"version":3,"names":["useState","useEffect","Button","Form","InputGroup","Card","jsx","_jsx","jsxs","_jsxs","SearchLabelForm","_ref","kbUri","updateCallBack","_useState","_useState2","_slicedToArray","searchLabel","setSearchLabel","_useState3","_useState4","storedLabels","setStoredLabels","_useState5","_useState6","dataLoaded","setDataLoaded","fetchStoredLabels","_fetchStoredLabels","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","queryTxt","endpoint_uri","response","jsonData","wrap","_callee$","_context","prev","next","abrupt","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","replaceAll","sent","json","results","bindings","t0","console","error","stop","handleSearchClick","log","children","Header","Body","className","Text","id","Control","placeholder","list","value","onChange","e","target","map","binding","storedLabel","class","size","variant","onClick"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/SearchLabelForm.js"],"sourcesContent":["import {useState,useEffect} from 'react'\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport { Card } from 'react-bootstrap';\n\nexport default function SearchLabelForm({kbUri,updateCallBack}){\n\n    const [searchLabel, setSearchLabel] = useState('temperature'); \n\n    const [storedLabels,setStoredLabels] = useState([]);\n\n    const [dataLoaded, setDataLoaded] = useState(false);\n\n    async function  fetchStoredLabels ( )  {\n        try { \n\n            if(dataLoaded)\n                return;\n\n            const queryTxt = \n                'PREFIX skos: <http://www.w3.org/2004/02/skos/core#> '\n                +'SELECT DISTINCT ?storedLabel WHERE {?concept skos:prefLabel ?storedLabel }'\n\n            const endpoint_uri = kbUri;\n\n            const response = await fetch(endpoint_uri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                     \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt.replaceAll('\\n',' ')\n            }\n            )            \n            \n            const jsonData = await response.json();\n                        \n            if(jsonData){\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        \n                        setDataLoaded(true);\n                        setStoredLabels(jsonData.results.bindings);\n\n                        // console.log('jsonData.results.bindings',jsonData.results.bindings);\n                    }\n                }\n                \n            }\n\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    }\n\n\n    function handleSearchClick(){\n        updateCallBack(searchLabel);\n        console.log('update Search Label call back',searchLabel);\n    }\n\n\n    useEffect (\n        () =>{\n            fetchStoredLabels();\n       },[dataLoaded] \n   );\n\n   \n    return (\n        dataLoaded?(\n            <Card>\n                <Card.Header>Search</Card.Header>\n                <Card.Body>\n                <InputGroup className=\"mb-3\">\n                        <InputGroup.Text id='searchLabelInputGroup'>{\"Label :\"}</InputGroup.Text>\n                        <Form.Control \n                            \n                            id='search label'\n                            placeholder='Type a label'\n                            aria-aria-label='search label'\n                            aria-describedby='searchLabelInputGroup'\n                            \n                            // autoComplete='on'\n                            // data = {['un','deux','trois']}\n                            list='storeLabelListOption'\n                            value={searchLabel} \n                            onChange={e =>setSearchLabel(e.target.value)}\n                        />\n                        <datalist id = 'storeLabelListOption'>\n                            {\n                            storedLabels.map( binding => \n                                <option >{binding.storedLabel.value}</option>\n                            )}\n                        </datalist>\n\n                </InputGroup>\n                <p>{'  Selected : '+searchLabel}</p>\n                <div class=\"d-grid gap-2\">\n                    <Button size=\"lg\" variant=\"outline-secondary\" id=\"button-search\"  onClick={handleSearchClick}>\n                        Retrieve Datasets\n                    </Button>\n                </div>\n                </Card.Body>\n            </Card>\n        ):(\n            <p>loading ... </p>\n        )\n    )\n    \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}