{"ast":null,"code":"import _regeneratorRuntime from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vincentarmant/workspace/nodejs/react-restapi-call/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import InputGroup from'react-bootstrap/InputGroup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchLabelForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchLabel=_useState2[0],setSearchLabel=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),storedLabels=_useState4[0],setStoreLabels=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),bindings=_useState6[0],setBindings=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),dataLoaded=_useState8[0],setDataLoaded=_useState8[1];function fetchStoredLabels(){return _fetchStoredLabels.apply(this,arguments);}function _fetchStoredLabels(){_fetchStoredLabels=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var queryTxt,endpoint_uri,response,jsonData,retrievedLabels;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!dataLoaded){_context.next=3;break;}return _context.abrupt(\"return\");case 3:queryTxt='PREFIX skos: <http://www.w3.org/2004/02/skos/core#> '+'SELECT DISTINCT ?searchLabel WHERE {?concept skos:prefLabel ?searchLabel } limit 10';endpoint_uri='http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph';_context.next=7;return fetch(endpoint_uri,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":'application/x-www-form-urlencoded',\"xhrFields\":{withCredentials:true},\"Accept\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:\"query=\"+queryTxt.replaceAll('\\n',' ')});case 7:response=_context.sent;_context.next=10;return response.json();case 10:jsonData=_context.sent;console.log('json storedLabels:',jsonData);if(jsonData){if(jsonData.results){if(jsonData.results.bindings){setDataLoaded(true);setBindings(jsonData.results.bindings);retrievedLabels=[];jsonData.results.bindings.map(function(binding){retrievedLabels.push(binding['searchLabel']['value']);});setStoreLabels(retrievedLabels);console.log('jsonData.results.bindings',jsonData.results.bindings);console.log('retrievedLabels',retrievedLabels);}}}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return _fetchStoredLabels.apply(this,arguments);}function handleSearchClick(){fetchStoredLabels();console.log('click');}useEffect(function(){var resp=fetchStoredLabels();},[dataLoaded]);function searchGroup(){return dataLoaded?/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(InputGroup.Text,{id:\"searchLabelInputGroup\",children:\"Label :\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Type a label\",\"aria-aria-label\":\"search label\",\"aria-describedby\":\"searchLabelInputGroup\"// autoComplete='on'\n// data = {['un','deux','trois']}\n,list:\"storeLabelListOption\",value:searchLabel,onChange:function onChange(e){return setSearchLabel(e.target.value);}}),/*#__PURE__*/_jsxs(\"datalist\",{id:\"storeLabelListOption\",children:[bindings.map(function(binding){return/*#__PURE__*/_jsx(\"option\",{children:binding.searchLabel.value});}),storedLabels.map(function(l){return/*#__PURE__*/_jsx(\"option\",{children:l});}),/*#__PURE__*/_jsx(\"option\",{children:\"un\"}),/*#__PURE__*/_jsx(\"option\",{children:\"deux\"}),/*#__PURE__*/_jsx(\"option\",{children:\"trois\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",id:\"button-search\",onClick:handleSearchClick,children:\"search\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"loading ... \"});}return/*#__PURE__*/_jsx(\"div\",{children:searchGroup()});}","map":{"version":3,"names":["useState","useEffect","Button","Form","InputGroup","jsx","_jsx","jsxs","_jsxs","SearchLabelForm","_useState","_useState2","_slicedToArray","searchLabel","setSearchLabel","_useState3","_useState4","storedLabels","setStoreLabels","_useState5","_useState6","bindings","setBindings","_useState7","_useState8","dataLoaded","setDataLoaded","fetchStoredLabels","_fetchStoredLabels","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","queryTxt","endpoint_uri","response","jsonData","retrievedLabels","wrap","_callee$","_context","prev","next","abrupt","fetch","method","credentials","headers","withCredentials","redirect","referrerPolicy","body","replaceAll","sent","json","console","log","results","map","binding","push","t0","error","stop","handleSearchClick","resp","searchGroup","className","children","Text","id","Control","placeholder","list","value","onChange","e","target","l","variant","onClick"],"sources":["/home/vincentarmant/workspace/nodejs/react-restapi-call/src/components/SearchLabelForm.js"],"sourcesContent":["import {useState,useEffect} from 'react'\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\n\nexport default function SearchLabelForm(){\n\n    const [searchLabel, setSearchLabel] = useState(''); \n\n    const [storedLabels,setStoreLabels] = useState([]);\n\n    const [bindings, setBindings] = useState([]);\n\n    const [dataLoaded, setDataLoaded] = useState(false);\n\n    async function  fetchStoredLabels ( )  {\n        try { \n\n            if(dataLoaded)\n                return;\n\n            const queryTxt = \n                'PREFIX skos: <http://www.w3.org/2004/02/skos/core#> '\n                +'SELECT DISTINCT ?searchLabel WHERE {?concept skos:prefLabel ?searchLabel } limit 10'\n\n            const endpoint_uri = 'http://13.38.36.148:8080/rdf4j-server/repositories/ucmm_instance_graph'\n\n            const response = await fetch(endpoint_uri,{\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers:{\n                    \"Content-Type\": 'application/x-www-form-urlencoded',\n                    \"xhrFields\": {withCredentials: true},\n                     \"Accept\" : \"application/json\",\n                },\n                redirect: \"follow\",\n                referrerPolicy: \"no-referrer\",\n                body: \"query=\"+ queryTxt.replaceAll('\\n',' ')\n            }\n            )            \n            \n            const jsonData = await response.json();\n            \n            console.log('json storedLabels:', jsonData);\n            \n            if(jsonData){\n                if(jsonData.results){\n                    if(jsonData.results.bindings){\n                        \n                        setDataLoaded(true);\n\n                        setBindings(jsonData.results.bindings);\n                        \n\n                        const retrievedLabels = [];\n                        jsonData.results.bindings.map(\n                            binding => {\n                                retrievedLabels.push(binding['searchLabel']['value']);\n                            }\n                        );\n                        setStoreLabels(retrievedLabels);\n\n                        console.log('jsonData.results.bindings',jsonData.results.bindings);\n                        console.log('retrievedLabels',retrievedLabels);\n                    }\n                }\n                \n            }\n\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    }\n\n\n    function handleSearchClick(){\n        fetchStoredLabels();\n        console.log('click');\n    }\n\n\n    useEffect (\n        () =>{\n             const resp = fetchStoredLabels();\n       },[dataLoaded] \n   );\n\n    function searchGroup(){\n        return(\n            dataLoaded?(\n            <InputGroup className=\"mb-3\">\n                    <InputGroup.Text id='searchLabelInputGroup'>{\"Label :\"}</InputGroup.Text>\n                    <Form.Control \n                        \n                        placeholder='Type a label'\n                        aria-aria-label='search label'\n                        aria-describedby='searchLabelInputGroup'\n                        \n                        // autoComplete='on'\n                        // data = {['un','deux','trois']}\n                        list='storeLabelListOption'\n                        value={searchLabel} \n                        onChange={e =>setSearchLabel(e.target.value)}\n                    />\n                    <datalist id = 'storeLabelListOption'>\n                        {\n                        bindings.map( binding => \n                            <option >{binding.searchLabel.value}</option>\n                        )}\n                        {storedLabels.map( l => \n                            <option >{l}</option>\n                        )}\n                        <option >un</option>\n                        <option >deux</option>\n                        <option >trois</option>\n                    </datalist>\n\n                    \n                    <Button variant=\"outline-secondary\" id=\"button-search\" onClick={handleSearchClick}>\n                        search\n                    </Button> \n            </InputGroup>\n            ):(\n                <p>loading ... </p>\n            )\n        );\n    }\n    \n\n    return (\n        <div>\n            {searchGroup()}\n        </div>)\n    \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}